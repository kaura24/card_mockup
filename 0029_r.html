<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>KBêµ­ë¯¼ì¹´ë“œ | ì¹´ë“œì •ë³´(í™•ì¸ìš©) (0029)</title>

  <style>
    :root{
      --text:#111;
      --muted:#666;
      --line:#d9d9d9;
      --panel:#f4f6f9;
      --req:#d64545;
      --kb-yellow:#ffcc00;
      --kb-yellow-dark:#f2b800;
      --white:#fff;

      --modal-bg:rgba(0,0,0,.6);
      --mono: ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;
    }
    *{box-sizing:border-box;-webkit-tap-highlight-color:transparent;}
    body{
      margin:0;
      font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Noto Sans KR","Apple SD Gothic Neo",Arial,sans-serif;
      color:var(--text);
      background:var(--white);
      line-height:1.5;
    }

    /* ===== Page ===== */
    .wrap{
      max-width:1120px;
      margin:0 auto;
      padding:34px 24px 90px;
    }

    /* Header */
    .header-group{margin-bottom:18px;}
    .title{
      margin:0;
      font-size:30px;
      font-weight:900;
      letter-spacing:-.7px;
      display:flex;
      align-items:baseline;
      gap:10px;
      flex-wrap:wrap;
    }
    .screen-id{
      font-size:.78em;
      font-weight:900;
      color:#666;
      letter-spacing:-.2px;
      white-space:nowrap;
    }
    .subnote{
      margin:8px 0 0;
      color:#555;
      font-size:14px;
      font-weight:650;
    }

    /* Form layout */
    .form-container{border-top:2px solid #333;margin-top:18px;}
    .required-info{
      text-align:right;
      font-size:13px;
      color:var(--muted);
      margin:10px 0 8px;
    }
    .required-info .star{color:var(--req);margin-right:4px;}

    .form-row{
      display:grid;
      grid-template-columns:280px 1fr;
      border-bottom:1px solid var(--line);
      align-items:stretch;
    }
    .form-label{
      background:#fafafa;
      padding:18px 24px;
      display:flex;
      align-items:center;
      font-size:16px;
      font-weight:800;
      color:#333;
    }
    .form-content{
      padding:16px 24px 18px;
      display:flex;
      flex-direction:column;
      gap:10px;
    }

    /* Readonly table (í™•ì¸ìš©) */
    .info-table{
      width:100%;
      border-collapse:collapse;
      border:1px solid var(--line);
      font-size:14px;
    }
    .info-table th,
    .info-table td{
      border-bottom:1px solid var(--line);
      padding:12px 14px;
      text-align:left;
      vertical-align:middle;
    }
    .info-table th{
      width:240px;
      background:#f9f9f9;
      font-weight:850;
      color:#333;
    }
    .info-table td{
      color:#222;
      word-break:break-all;
    }

    .help-line{
      margin:4px 0 0;
      font-size:13px;
      color:#777;
    }

    /* bottom buttons */
    .btn-area{
      margin-top:42px;
      display:flex;
      justify-content:center;
      gap:14px;
      flex-wrap:wrap;
    }
    .btn-secondary{
      width:180px;height:56px;
      border-radius:10px;
      border:1px solid #cfcfcf;
      background:#fff;
      color:#333;
      font-size:17px;
      font-weight:900;
      cursor:pointer;
      transition:.15s ease;
    }
    .btn-secondary:hover{background:#fafafa;}
    .btn-secondary:active{transform:scale(.98);}

    .btn-primary{
      width:260px;height:56px;
      border:none;
      border-radius:10px;
      background:var(--kb-yellow);
      color:#222;
      font-size:18px;
      font-weight:950;
      cursor:pointer;
      transition:.15s ease;
      display:flex;
      align-items:center;
      justify-content:center;
      gap:10px;
    }
    .btn-primary:hover{background:var(--kb-yellow-dark);}
    .btn-primary:active{transform:scale(.98);}

    .spinner{
      width:18px;height:18px;
      border:3px solid rgba(0,0,0,0.12);
      border-top-color:#333;
      border-radius:50%;
      animation:spin .8s linear infinite;
      display:none;
    }
    .btn-primary.is-loading .spinner{display:block;}
    .btn-primary.is-loading .btn-text{display:none;}
    @keyframes spin{to{transform:rotate(360deg);}}

    /* Toast */
    .toast{
      position:fixed;
      left:50%;
      bottom:40px;
      transform:translateX(-50%) translateY(20px);
      background:rgba(33,33,33,.92);
      color:#fff;
      padding:12px 22px;
      border-radius:30px;
      font-size:14px;
      font-weight:650;
      opacity:0;
      pointer-events:none;
      transition:all .28s cubic-bezier(.175,.885,.32,1.275);
      z-index:3000;
      box-shadow:0 8px 24px rgba(0,0,0,.2);
      max-width:calc(100vw - 40px);
      text-align:center;
      line-height:1.35;
    }
    .toast.show{opacity:1;transform:translateX(-50%) translateY(0);}

    /* ===== ìš”êµ¬ì‚¬í•­ ë²„íŠ¼(ë¬¼ìŒí‘œ ì•„ì´ì½˜ / ì»¬ëŸ¬) ===== */
    .req-trigger{
      position:fixed;
      right:24px;
      bottom:24px;
      width:56px;height:56px;
      border-radius:50%;
      background:#222;
      color:var(--kb-yellow);
      border:none;
      font-size:26px;
      font-weight:900;
      cursor:pointer;
      box-shadow:0 4px 12px rgba(0,0,0,.3);
      z-index:2900;
      transition:transform .2s;
    }
    .req-trigger:hover{transform:rotate(15deg) scale(1.08);}
    .req-trigger:active{transform:scale(.98);}

    /* ===== Spec modal ===== */
    .modal-overlay{
      position:fixed;
      inset:0;
      background:var(--modal-bg);
      display:none;
      align-items:center;
      justify-content:center;
      padding:20px;
      z-index:4000;
      backdrop-filter:blur(4px);
    }
    .modal-overlay.show{display:flex;}
    .modal-content{
      width:100%;
      max-width:900px;
      background:#fff;
      border-radius:16px;
      max-height:90vh;
      overflow-y:auto;
      box-shadow:0 24px 48px rgba(0,0,0,.4);
    }
    .modal-header{
      padding:20px 24px;
      border-bottom:1px solid #eee;
      display:flex;
      justify-content:space-between;
      align-items:center;
      position:sticky;
      top:0;
      background:#fff;
    }
    .modal-header h2{margin:0;font-size:18px;font-weight:900;}
    .modal-close{
      background:#f5f5f5;
      border:none;
      padding:8px 16px;
      border-radius:6px;
      cursor:pointer;
      font-weight:850;
    }
    .modal-body{padding:24px;}
    .spec-table{width:100%;border-collapse:collapse;margin-bottom:20px;font-size:14px;}
    .spec-table th,.spec-table td{border:1px solid #eee;padding:12px;text-align:left;vertical-align:top;}
    .spec-table th{background:#f9f9f9;width:160px;font-weight:850;}
    .spec-section{margin-top:24px;}
    .spec-section h3{font-size:15px;margin-bottom:12px;border-left:4px solid var(--kb-yellow);padding-left:10px;font-weight:900;}
    .spec-section ul{margin:0;padding-left:20px;font-size:14px;line-height:1.6;}
    .json-code{
      background:#1e1e1e;color:#d4d4d4;
      padding:16px;border-radius:8px;
      font-family:var(--mono);
      font-size:12px;overflow-x:auto;margin-top:12px;
    }

    /* Responsive */
    @media (max-width: 860px){
      .form-row{grid-template-columns:1fr;}
      .form-label{padding:12px 20px;border-bottom:1px solid #eee;}
      .form-content{padding:16px 20px;}
      .btn-area{flex-direction:column;}
      .btn-secondary,.btn-primary{width:100%;}
    }
  </style>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/variable/pretendardvariable-dynamic-subset.min.css"/>
  <link rel="stylesheet" href="css/kb-theme.css"/>
  <link rel="stylesheet" href="css/common.css" />
</head>

<body>

  <div class="wrap">
    <div class="header-group">
      <!-- âœ… ì œëª© ì˜†ì— í™”ë©´ë²ˆí˜¸ ì‹¤ì œ ë Œë” + íƒ­ íƒ€ì´í‹€ë„ JSì—ì„œ SSOTë¡œ ë™ê¸°í™” -->
      <h1 id="page-title" class="title">
        <span id="title-text">ì¹´ë“œì •ë³´(í™•ì¸ìš©)</span>
        <span id="title-id" class="screen-id">(0029)</span>
      </h1>
      <p class="subnote">ì´ì „ì— ì…ë ¥/ì„ íƒí•œ ì¹´ë“œ ê´€ë ¨ ì •ë³´ë¥¼ í™•ì¸í•˜ì„¸ìš”. ìˆ˜ì •ì´ í•„ìš”í•œ ê²½ìš° â€˜ìˆ˜ì •í•˜ê¸°â€™ë¥¼ ì´ìš©í•˜ì„¸ìš”.</p>
    </div>

    <!-- í™•ì¸ìš©ì´ë¼ í•„ìˆ˜ í‘œì‹œ ë¼ì¸ì„ ìˆ¨ê¸°ê³  ë™ì¼ ë ˆì´ì•„ì›ƒë§Œ ìœ ì§€ -->
    <div class="form-container">
      <section class="form-row">
        <div class="form-label">
          ì¹´ë“œì •ë³´ ìš”ì•½
        </div>
        <div class="form-content">
          <table id="info-table" class="info-table" aria-label="ì¹´ë“œì •ë³´ í™•ì¸ìš© í…Œì´ë¸”">
            <tbody>
              <!-- JS ë Œë” -->
            </tbody>
          </table>
          <div class="help-line">ë³¸ í™”ë©´ì€ í™•ì¸ìš©ì…ë‹ˆë‹¤. ë‹¤ìŒ ë‹¨ê³„ë¡œ ë„˜ì–´ê°€ê¸° ì „ì— ì •ë³´ë¥¼ ë‹¤ì‹œ í™•ì¸í•´ ì£¼ì„¸ìš”.</div>
        </div>
      </section>
    </div>

    <div class="btn-area">
      <button type="button" id="btn-edit" class="btn-secondary">ìˆ˜ì •í•˜ê¸°</button>
      <button type="button" id="btn-next" class="btn-primary">
        <span class="spinner" aria-hidden="true"></span>
        <span class="btn-text">ë‹¤ìŒ</span>
      </button>
    </div>
  </div>

  

  <!-- âœ… ìš”êµ¬ì‚¬í•­ ë³´ê¸° ë²„íŠ¼(ë¬¼ìŒí‘œ ì•„ì´ì½˜ / ì»¬ëŸ¬) -->
  <button type="button" id="btn-spec" class="req-trigger" title="ê¸°ëŠ¥ìš”êµ¬ì„œ í™•ì¸" aria-label="ê¸°ëŠ¥ìš”êµ¬ì„œ ë° ì£¼ì„ ë³´ê¸°">?</button>

  <!-- ìš”êµ¬ì‚¬í•­ ëª¨ë‹¬ -->
  <div id="modal-spec" class="modal-overlay" aria-hidden="true" role="dialog" aria-modal="true" aria-labelledby="modal-title">
    <div class="modal-content">
      <div class="modal-header">
        <h2 id="modal-title">ê¸°ëŠ¥ìš”êµ¬ì„œ ë° ì£¼ì„</h2>
        <button type="button" id="btn-modal-close" class="modal-close">ë‹«ê¸°</button>
      </div>
      <div id="modal-body" class="modal-body"></div>
    </div>
  </div>

<script>
    const SCREEN_ID = "0029";
/**
 * KBêµ­ë¯¼ì¹´ë“œ ê¸°ì—…ì¹´ë“œ ì‹ ì²­ í”„ë¡œì„¸ìŠ¤ - Step 0029
 * í™”ë©´ëª…: ì¹´ë“œì •ë³´(í™•ì¸ìš©)
 *
 * ğŸ”§ í¬ì¸íŠ¸ (ì˜ˆì‹œ í…œí”Œë¦¿ êµ¬ì¡° ìœ ì§€)
 * 1) ì´ì „ ì„¸ì…˜ ê²°ê³¼ë¥¼ ìš”ì•½ í…Œì´ë¸”ë¡œ 'ì½ê¸° ì „ìš©' í‘œì‹œ
 * 2) 'ìˆ˜ì •í•˜ê¸°' í´ë¦­ ì‹œ ì¹´ë“œ ê´€ë ¨ ìµœì´ˆ ì…ë ¥ í™”ë©´(ê¶Œê³ : ID 0021 ì¹´ë“œì„ íƒ)ìœ¼ë¡œ ì´ë™
 *    â€» í•„ìš” ì‹œ í•­ëª©ë³„ë¡œ ë‹¤ë¥¸ ìˆ˜ì • ëª©ì ì§€(0020/0021/0022/0023/0024/0025/0026)ë¡œ í™•ì¥ ê°€ëŠ¥
 * 3) 'ë‹¤ìŒ' í´ë¦­ ì‹œ ì‚¬ì—…ìì •ë³´(í™•ì¸ìš©) 0030ìœ¼ë¡œ ì§„í–‰
 */
(function(){
  // =========================
  // 0) SSOT: í™”ë©´ ë©”íƒ€
  // =========================
  const META = {
    id: "0029",
    title: "ì¹´ë“œì •ë³´(í™•ì¸ìš©)",
    name: "ì¹´ë“œì •ë³´(í™•ì¸ìš©)",
    editTarget: "0021", // ê¸°ë³¸: ì¹´ë“œì„ íƒ í™”ë©´ìœ¼ë¡œ ì´ë™
    nextTarget: "0030"  // ë‹¤ìŒ: ì‚¬ì—…ìì •ë³´(í™•ì¸ìš©)
  };

  // íƒ­/ì œëª© ë™ê¸°í™”
  document.title = `KBêµ­ë¯¼ì¹´ë“œ | ${META.title} (${META.id})`;
  document.getElementById("title-text").textContent = META.title;
  document.getElementById("title-id").textContent = `(${META.id})`;

  // =========================
  // 1) ìƒ˜í”Œ DATA (ì‹¤ì„œë¹„ìŠ¤: ì´ì „ ì„¸ì…˜ ê²°ê³¼ ì£¼ì…)
  //    - ì²¨ë¶€ ì´ë¯¸ì§€ ì˜ˆì‹œê°’ì„ ë°˜ì˜
  // =========================
  const DATA = {
    cardName: "ONE KBêµ­ë¯¼ global ê¸°ì—…ì¹´ë“œ",
    cardDesign: "ê³µìš©",
    applyType: "ì‹ ê·œ",
    confirmAndTerms: "ë¬¸ìë©”ì‹œì§€(010-3665-8433)",   // ì•½ê´€ ìˆ˜ë ¹ë°©ë²• í¬í•¨
    brand: "VISA",
    payAccount: "êµ­ë¯¼ì€í–‰ 123456-45-****",
    payDay: "01ì¼",
    billReceive: "ìš°í¸ìˆ˜ë ¹",                        // (ìš´ì˜ ì •ì±…ìƒ ìš°í¸ ë¹„ë…¸ì¶œ ê¶Œê³ ê°€ ìˆìœ¼ë‚˜ ì˜ˆì‹œê°’ ë°˜ì˜)
    qty: "ê³µìš© 1ë§¤",
    deliveryPlace: "ì‚¬ì—…ì¥"
  };

  const ROWS = [
    { label:"ì¹´ë“œ", value: DATA.cardName },
    { label:"ì¹´ë“œë””ìì¸ëª…", value: DATA.cardDesign },
    { label:"ì‹ ì²­ìœ í˜•", value: DATA.applyType },
    { label:"ë°œê¸‰í™•ì¸ ë° ì•½ê´€ìˆ˜ë ¹ë°©ë²•", value: DATA.confirmAndTerms },
    { label:"ë¸Œëœë“œ", value: DATA.brand },
    { label:"ê²°ì œê³„ì¢Œ", value: DATA.payAccount },
    { label:"ê²°ì œì¼", value: DATA.payDay },
    { label:"ëª…ì„¸ì„œë°›ëŠ”ë°©ë²•", value: DATA.billReceive },
    { label:"ì‹ ì²­ë§¤ìˆ˜", value: DATA.qty },
    { label:"ì¹´ë“œìˆ˜ë ¹ì§€", value: DATA.deliveryPlace }
  ];

  // =========================
  // 2) DOM
  // =========================
  const infoTbody = document.querySelector("#info-table tbody");
  const toast     = document.getElementById("toast");
  const btnEdit   = document.getElementById("btn-edit");
  const btnNext   = document.getElementById("btn-next");

  const specBtn    = document.getElementById("btn-spec");
  const modal      = document.getElementById("modal-spec");
  const modalClose = document.getElementById("btn-modal-close");

  // =========================
  // 3) Utils
  // =========================
  const showToast = (message) => {
    toast.textContent = message;
    toast.classList.add("show");
    setTimeout(() => toast.classList.remove("show"), 2200);
  };
  const setLoading = (isLoading) => {
    btnNext.classList.toggle("is-loading", isLoading);
  };
  const goTo = (id) => { location.hash = `#/${id}`; };

  // =========================
  // 4) Render
  // =========================
  const render = () => {
    infoTbody.innerHTML = "";
    ROWS.forEach(r => {
      const tr = document.createElement("tr");
      tr.innerHTML = `
        <th scope="row">${r.label}</th>
        <td>${r.value ?? ""}</td>
      `;
      infoTbody.appendChild(tr);
    });
  };

  // =========================
  // 5) Navigation
  // =========================
  btnEdit.addEventListener("click", () => {
    showToast("ì¹´ë“œ ê´€ë ¨ ì •ë³´ ìˆ˜ì • í™”ë©´ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤.");
    if (window.ScenarioNav) {
ScenarioNav.goNext();
      } else {
        setTimeout(() => goTo(META.editTarget), 250);
      }
    }
  });

  btnNext.addEventListener("click", async () => {
    if (btnNext.classList.contains("is-loading")) return;
    setLoading(true);
    try{
      // ì •ë³´ì„± í™”ë©´ì´ë¯€ë¡œ ë³„ë„ ê²€ì¦ ì—†ì´ ë‹¤ìŒ ë‹¨ê³„ ì´ë™
      await new Promise(res => setTimeout(res, 400));
      if (window.ScenarioNav) {
ScenarioNav.goNext();
      } else {
            goTo(META.nextTarget);
          }
        }
      }
    } finally {
      setLoading(false);
    }
  });

  // =========================
  // 6) Spec modal (ìš”ê±´ì •ì˜ì„œ/ì£¼ì„)
  // =========================
  const REQ_SPEC = {
    screen_id: META.id,
    screen_name: META.name,
    purpose: "ì´ì „ ì„¸ì…˜ì—ì„œ ì…ë ¥/ì„ íƒí•œ ì¹´ë“œ ê´€ë ¨ ì •ë³´ë¥¼ ìš”ì•½í•˜ì—¬ ê³ ê°ì—ê²Œ í™•ì¸ì‹œí‚¤ëŠ” í™”ë©´",
    business_rule_source: "í™”ë©´ê¸°ëŠ¥ëª©ë¡ ID:0029 (ì¹´ë“œì •ë³´(í™•ì¸ìš©))",
    target: { corp: true, sole: false }, // í‘œ ì›ë¬¸: ë²•ì¸ Y / ê°œì¸ N
    action: "ì •ë³´ì¡°íšŒ",
    processing: {
      integration: false,   // ì²˜ë¦¬ê³„ ê±°ë˜: N
      domain: "-",
      source: "ì´ì „ ì„¸ì…˜ ê²°ê³¼(í´ë¼ì´ì–¸íŠ¸ ìƒíƒœ/ì„œë²„ ì„¸ì…˜/í”Œë«í¼ DB)",
      description: "ê°’ ë³€ê²½ ì—†ìŒ. ì½ê¸° ì „ìš© í™•ì¸ í™”ë©´"
    },
    fields: ROWS.map(x => x.label),
    rules: [
      "ë³¸ í™”ë©´ì€ ì½ê¸° ì „ìš©(ìˆ˜ì • ë¶ˆê°€)ìœ¼ë¡œ ì œê³µí•œë‹¤.",
      "â€˜ìˆ˜ì •í•˜ê¸°â€™ í´ë¦­ ì‹œ ì¹´ë“œ ê´€ë ¨ ìµœì´ˆ ì…ë ¥ í™”ë©´(ID:0021)ìœ¼ë¡œ ì´ë™í•œë‹¤.",
      "í‘œì‹œ ê°’ì€ ì§ì „ ë‹¨ê³„/ì„¸ì…˜ì—ì„œ ìµœì¢… ì €ì¥ëœ ê°’ê³¼ ë°˜ë“œì‹œ ì¼ì¹˜í•´ì•¼ í•œë‹¤.",
      "ê³„ì¢Œ/ì—°ë½ì²˜ ë“± ë¯¼ê° ì •ë³´ëŠ” ì •ì±…ì— ë”°ë¼ ë§ˆìŠ¤í‚¹í•˜ì—¬ ë…¸ì¶œí•œë‹¤."
    ],
    qa_points: [
      "ê°’ ëˆ„ë½/í¬ë§· ì˜¤ë¥˜(ì˜ˆ: ê²°ì œì¼ 01/11/21ì¼ ë²”ìœ„ ê²€ì‚¬)ëŠ” ì´ì „ ë‹¨ê³„ì—ì„œ ì´ë¯¸ ê²€ì¦ë˜ì–´ì•¼ í•¨",
      "ë””ìì¸ëª…/ë¸Œëœë“œ/ì‹ ì²­ë§¤ìˆ˜ ë“± ê³µìš©/ê°œë³„ ì‹œë‚˜ë¦¬ì˜¤ ì°¨ì´ í‘œì‹œ í™•ì¸",
      "ë§ˆìŠ¤í‚¹ ê·œì¹™(ê³„ì¢Œë²ˆí˜¸/ì—°ë½ì²˜) ì¼ê´€ì„±",
      "ë‹¤ìŒ ë‹¨ê³„(0030) ì´ë™ í›„ ë’¤ë¡œê°€ê¸° ì‹œ ìƒíƒœ ë³´ì¡´ ì—¬ë¶€"
    ],
    next: { success: "0030 (ì‚¬ì—…ìì •ë³´(í™•ì¸ìš©))" }
  };

  const renderSpec = () => {
    const body = document.getElementById("modal-body");
    const title = document.getElementById("modal-title");
    if (title) title.textContent = `ê¸°ëŠ¥ìš”êµ¬ì„œ ë° ì£¼ì„ (${META.id})`;

    body.innerHTML = `
      <table class="spec-table">
        <tr><th>í™”ë©´ ID</th><td>${REQ_SPEC.screen_id}</td></tr>
        <tr><th>í™”ë©´ëª…</th><td>${REQ_SPEC.screen_name}</td></tr>
        <tr><th>ëª©ì </th><td>${REQ_SPEC.purpose}</td></tr>
        <tr><th>ê·¼ê±°</th><td>${REQ_SPEC.business_rule_source}</td></tr>
        <tr><th>Action</th><td>${REQ_SPEC.action}</td></tr>
        <tr><th>ë‹¤ìŒ ë‹¨ê³„</th><td>${REQ_SPEC.next.success}</td></tr>
      </table>

      <div class="spec-section">
        <h3>í‘œì‹œ í•­ëª©</h3>
        <ul>${REQ_SPEC.fields.map(x => `<li>${x}</li>`).join("")}</ul>
      </div>

      <div class="spec-section">
        <h3>ì²˜ë¦¬ê³„ ì—°ë™</h3>
        <ul>
          <li>ì²˜ë¦¬ê³„ ê±°ë˜: N (ì´ì „ ì„¸ì…˜ ê²°ê³¼ í‘œì‹œ)</li>
          <li>ë„ë©”ì¸: -</li>
        </ul>
      </div>

      <div class="spec-section">
        <h3>ê·œì¹™</h3>
        <ul>${REQ_SPEC.rules.map(x => `<li>${x}</li>`).join("")}</ul>
      </div>

      <div class="spec-section">
        <h3>QA / ê°œë°œ ì²´í¬ë¦¬ìŠ¤íŠ¸</h3>
        <ul>${REQ_SPEC.qa_points.map(x => `<li>${x}</li>`).join("")}</ul>
      </div>

      <div class="spec-section">
        <h3>ë°ì´í„° ìŠ¤í™ (JSON)</h3>
        <div class="json-code">${JSON.stringify(REQ_SPEC, null, 2)}</div>
      </div>
    `;
  };

  const openModal = () => {
    renderSpec();
    const modal = document.getElementById("modal-spec");
    modal.classList.add("show");
    modal.setAttribute("aria-hidden","false");
    document.body.style.overflow = "hidden";
    document.getElementById("btn-modal-close").focus();
  };
  const closeModal = () => {
    const modal = document.getElementById("modal-spec");
    modal.classList.remove("show");
    modal.setAttribute("aria-hidden","true");
    document.body.style.overflow = "";
    document.getElementById("btn-spec").focus();
  };

  document.getElementById("btn-spec").addEventListener("click", openModal);
  document.getElementById("btn-modal-close").addEventListener("click", closeModal);
  document.getElementById("modal-spec").addEventListener("click", (e) => { if (e.target === e.currentTarget) closeModal(); });
  document.addEventListener("keydown", (e) => { if (e.key === "Escape" && document.getElementById("modal-spec").classList.contains("show")) closeModal(); });

  // init
  render();
})();
</script>
<script src="js/common.js"></script>
<script src="js/session-db.js"></script>
<script src="js/scenario-nav.js"></script>
<script src="js/spec-viewer.js" data-screen-id="0029"></script>
</body>
</html>