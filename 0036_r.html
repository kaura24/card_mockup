<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>KBêµ­ë¯¼ì¹´ë“œ | ê°œë³„ì¹´ë“œ ì‚¬ìš©ì ê°œì¸ëª…ì˜ê³„ì¢Œ ë“±ë¡ ì•ˆë‚´ (0036)</title>

  <style>
    :root{
      --text:#111;
      --muted:#666;
      --line:#d9d9d9;
      --panel:#f4f6f9;
      --req:#d64545;
      --kb-yellow:#ffcc00;
      --kb-yellow-dark:#f2b800;
      --white:#fff;

      --modal-bg:rgba(0,0,0,.6);
      --mono: ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;
      --info-bg:#f7faff;
      --info-line:#d9e8ff;
    }
    *{box-sizing:border-box;-webkit-tap-highlight-color:transparent;}
    body{
      margin:0;
      font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Noto Sans KR","Apple SD Gothic Neo",Arial,sans-serif;
      color:var(--text);
      background:#fff;
      line-height:1.5;
    }

    /* ===== Page ===== */
    .wrap{
      max-width:1120px;
      margin:0 auto;
      padding:34px 24px 90px;
    }

    /* Header */
    .header-group{margin-bottom:18px;}
    .title{
      margin:0;
      font-size:30px;
      font-weight:900;
      letter-spacing:-.7px;
      display:flex;
      align-items:baseline;
      gap:10px;
      flex-wrap:wrap;
    }
    .screen-id{
      font-size:.78em;
      font-weight:900;
      color:#666;
      letter-spacing:-.2px;
      white-space:nowrap;
    }
    .subnote{
      margin:8px 0 0;
      color:#555;
      font-size:14px;
      font-weight:650;
    }

    /* Form layout */
    .form-container{border-top:2px solid #333;margin-top:18px;}
    .form-row{
      display:grid;
      grid-template-columns:280px 1fr;
      border-bottom:1px solid var(--line);
      align-items:stretch;
    }
    .form-label{
      background:#fafafa;
      padding:18px 24px;
      display:flex;
      align-items:center;
      font-size:16px;
      font-weight:800;
      color:#333;
    }
    .form-label .star{color:var(--req);margin-left:4px;}
    .form-content{
      padding:16px 24px 18px;
      display:flex;
      flex-direction:column;
      gap:12px;
    }

    /* Info Panel */
    .info-panel{
      width:100%;
      background:var(--info-bg);
      border:1px solid var(--info-line);
      border-radius:10px;
      padding:16px 18px;
      color:#333;
    }
    .info-panel p{
      margin:0 0 6px;
      font-size:14px;
      line-height:1.7;
    }
    .info-panel .em{color:#6a42c2;font-weight:800;} /* ê°•ì¡°ìƒ‰ (ì´ë¯¸ì§€ì˜ ë³´ë¼ìƒ‰ í†¤ ë°˜ì˜) */

    /* Choice group */
    .choice{
      display:flex;flex-direction:column;gap:8px;
      padding:12px 14px;border:1px solid #eee;border-radius:12px;background:#fff;
    }
    .choice label{
      display:flex;align-items:center;gap:10px;font-size:15px;font-weight:800;color:#333;cursor:pointer;
    }
    .choice input[type="radio"]{width:18px;height:18px;accent-color:#111;cursor:pointer;}
    .subform{padding:10px 0 0 28px;display:none;}
    .subform.show{display:block;}

    /* Inputs */
    .input-text{
      width:100%;
      height:46px;
      border:1px solid var(--line);
      border-radius:8px;
      padding:0 14px;
      font-size:15px;color:#333;background:#fff;outline:none;
    }
    .input-text::placeholder{color:#999;font-weight:650;}
    .input-text.is-invalid{border-color:var(--req);background:#fff9f9;}
    .help-line{margin:2px 0 0;font-size:13px;color:#777;}

    /* Checkbox line */
    .agree-line{
      display:flex;align-items:center;gap:10px;
      background:#fff;border:1px solid #eee;border-radius:12px;
      padding:12px 14px;font-size:15px;color:#333;
    }
    .agree-line input[type="checkbox"]{width:20px;height:20px;accent-color:#111;cursor:pointer;}
    .agree-line .desc{font-weight:800;}

    /* bottom buttons */
    .btn-area{
      margin-top:42px;display:flex;justify-content:center;gap:14px;flex-wrap:wrap;
    }
    .btn-secondary{
      width:180px;height:56px;border-radius:10px;border:1px solid #cfcfcf;background:#fff;
      color:#333;font-size:17px;font-weight:900;cursor:pointer;transition:.15s ease;
    }
    .btn-secondary:hover{background:#fafafa;}
    .btn-secondary:active{transform:scale(.98);}

    .btn-primary{
      width:260px;height:56px;border:none;border-radius:10px;background:var(--kb-yellow);
      color:#222;font-size:18px;font-weight:950;cursor:pointer;transition:.15s ease;
      display:flex;align-items:center;justify-content:center;gap:10px;
    }
    .btn-primary:hover{background:var(--kb-yellow-dark);}
    .btn-primary:active{transform:scale(.98);}
    .btn-primary:disabled{background:#eee;color:#aaa;cursor:not-allowed;}

    .spinner{
      width:18px;height:18px;border:3px solid rgba(0,0,0,0.12);
      border-top-color:#333;border-radius:50%;animation:spin .8s linear infinite;display:none;
    }
    .btn-primary.is-loading .spinner{display:block;}
    .btn-primary.is-loading .btn-text{display:none;}
    @keyframes spin{to{transform:rotate(360deg);}}

    /* Toast */
    .toast{
      position:fixed;left:50%;bottom:40px;transform:translateX(-50%) translateY(20px);
      background:rgba(33,33,33,.92);color:#fff;padding:12px 22px;border-radius:30px;font-size:14px;font-weight:650;
      opacity:0;pointer-events:none;transition:all .28s cubic-bezier(.175,.885,.32,1.275);z-index:3000;
      box-shadow:0 8px 24px rgba(0,0,0,.2);max-width:calc(100vw - 40px);text-align:center;line-height:1.35;
    }
    .toast.show{opacity:1;transform:translateX(-50%) translateY(0);}

    /* ===== ìš”êµ¬ì‚¬í•­ ë²„íŠ¼ ===== */
    .req-trigger{
      position:fixed;right:24px;bottom:24px;width:56px;height:56px;border-radius:50%;
      background:#222;color:var(--kb-yellow);border:none;font-size:26px;font-weight:900;cursor:pointer;
      box-shadow:0 4px 12px rgba(0,0,0,.3);z-index:2900;transition:transform .2s;
    }
    .req-trigger:hover{transform:rotate(15deg) scale(1.08);}
    .req-trigger:active{transform:scale(.98);}

    /* ===== Spec modal ===== */
    .modal-overlay{
      position:fixed;inset:0;background:var(--modal-bg);display:none;align-items:center;justify-content:center;
      padding:20px;z-index:4000;backdrop-filter:blur(4px);
    }
    .modal-overlay.show{display:flex;}
    .modal-content{
      width:100%;max-width:900px;background:#fff;border-radius:16px;max-height:90vh;overflow-y:auto;
      box-shadow:0 24px 48px rgba(0,0,0,.4);
    }
    .modal-header{
      padding:20px 24px;border-bottom:1px solid #eee;display:flex;justify-content:space-between;align-items:center;
      position:sticky;top:0;background:#fff;
    }
    .modal-header h2{margin:0;font-size:18px;font-weight:900;}
    .modal-close{background:#f5f5f5;border:none;padding:8px 16px;border-radius:6px;cursor:pointer;font-weight:850;}
    .modal-body{padding:24px;}
    .spec-table{width:100%;border-collapse:collapse;margin-bottom:20px;font-size:14px;}
    .spec-table th,.spec-table td{border:1px solid #eee;padding:12px;text-align:left;vertical-align:top;}
    .spec-table th{background:#f9f9f9;width:160px;font-weight:850;}
    .spec-section{margin-top:24px;}
    .spec-section h3{font-size:15px;margin-bottom:12px;border-left:4px solid var(--kb-yellow);padding-left:10px;font-weight:900;}
    .spec-section ul{margin:0;padding-left:20px;font-size:14px;line-height:1.6;}
    .json-code{
      background:#1e1e1e;color:#d4d4d4;padding:16px;border-radius:8px;font-family:var(--mono);font-size:12px;overflow-x:auto;margin-top:12px;
    }

    /* Responsive */
    @media (max-width: 860px){
      .form-row{grid-template-columns:1fr;}
      .form-label{padding:12px 20px;border-bottom:1px solid #eee;}
      .form-content{padding:16px 20px;}
      .btn-area{flex-direction:column;}
      .btn-secondary,.btn-primary{width:100%;}
    }
  </style>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/variable/pretendardvariable-dynamic-subset.min.css"/>
  <link rel="stylesheet" href="css/kb-theme.css"/>
  <link rel="stylesheet" href="css/common.css" />
</head>

<body>

  <div class="wrap">
    <div class="header-group">
      <!-- âœ… ì œëª© ì˜† í™”ë©´ë²ˆí˜¸ ë Œë” + íƒ­ íƒ€ì´í‹€ë„ JSì—ì„œ SSOTë¡œ ë™ê¸°í™” -->
      <h1 id="page-title" class="title">
        <span id="title-text">ê°œë³„ì¹´ë“œ ì‚¬ìš©ì ê°œì¸ëª…ì˜ê³„ì¢Œ ë“±ë¡ ì•ˆë‚´</span>
        <span id="title-id" class="screen-id">(0036)</span>
      </h1>
      <p class="subnote">ì•ˆë‚´ë¥¼ í™•ì¸í•˜ê³ , ê°œì¸ëª…ì˜ ê²°ì œê³„ì¢Œ ë“±ë¡ ì—¬ë¶€ë¥¼ ì„ íƒí•´ ì£¼ì„¸ìš”.</p>
    </div>

    <div class="form-container">
      <!-- 1) ì•ˆë‚´ íŒ¨ë„ -->
      <section class="form-row">
        <div class="form-label">ì•ˆë‚´</div>
        <div class="form-content">
          <div class="info-panel" aria-label="ê°œë³„ì¹´ë“œ ì‚¬ìš©ì ê°œì¸ëª…ì˜ê³„ì¢Œ ë“±ë¡ ì•ˆë‚´">
            <p>ê¸°ì—…ê°œë³„ì¹´ë“œ ì‚¬ìš©ìì˜ <b>ê°œì¸ëª…ì˜ ê²°ì œê³„ì¢Œ</b>ë¥¼ ë“±ë¡ì„ ì›í•˜ëŠ” ê²½ìš°, ê³ ê°ë‹˜ì˜ ê°œì¸ëª…ì˜ ê²°ì œê³„ì¢Œ ìë™ì´ì²´ì‹ ì²­ì„œ ë° ì˜ˆê¸ˆì£¼ìš© ê°œì¸(ì‹ ìš©)ì •ë³´ ìˆ˜ì§‘Â·ì´ìš©Â·ì œê³µ <b>ë™ì˜ì„œ(í•„ìˆ˜)</b> ì‘ì„± ì ˆì°¨ê°€ ì™„ë£Œëœ ì´í›„ ë°œê¸‰ì‹ ì²­ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>
            <p>ì‘ì„±(ì œì¶œ)í•œ ë™ì˜ì„œëŠ” <span class="em">LMS ë°œì†¡ì¼ í¬í•¨ 3ì¼ê°„ë§Œ ìœ íš¨</span>í•˜ë¯€ë¡œ, ë°˜ë“œì‹œ í•´ë‹¹ ê¸°ê°„ ë‚´ ì¹´ë“œì‹ ì²­ ì ˆì°¨ë¥¼ ì™„ë£Œí•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.</p>
          </div>

          <!-- 2) ë“±ë¡ ì—¬ë¶€ ì„ íƒ -->
          <div class="choice" role="group" aria-label="ê°œì¸ëª…ì˜ ê³„ì¢Œ ë“±ë¡ ì—¬ë¶€">
            <label><input type="radio" name="reg" value="Y"> ê°œì¸ëª…ì˜ ê²°ì œê³„ì¢Œë¥¼ <u>ë“±ë¡</u>í•˜ê² ìŠµë‹ˆë‹¤(ê¶Œì¥)</label>
            <div id="subform" class="subform" aria-live="polite">
              <div class="help-line">ì•„ë˜ ì—°ë½ì²˜ë¡œ LMSë¥¼ ë°œì†¡í•˜ì—¬ ê³„ì¢Œ ë“±ë¡ì„ ì§„í–‰í•©ë‹ˆë‹¤.</div>
              <input id="phone" class="input-text" type="tel" inputmode="tel" placeholder="íœ´ëŒ€í° ë²ˆí˜¸ (ì˜ˆ: 010-1234-5678)" aria-label="LMS ìˆ˜ì‹  íœ´ëŒ€í° ë²ˆí˜¸">
              <div class="help-line">â€» LMSì˜ ê³„ì¢Œ ë“±ë¡ ë§í¬ëŠ” ë°œì†¡ì¼ í¬í•¨ 3ì¼ê°„ ìœ íš¨í•©ë‹ˆë‹¤. ë§í¬ ê³µìœ /ë„ìš©ì— ìœ ì˜í•´ ì£¼ì„¸ìš”.</div>
            </div>
            <label><input type="radio" name="reg" value="N"> ì§€ê¸ˆì€ <u>ë“±ë¡í•˜ì§€ ì•Šê² ìŠµë‹ˆë‹¤</u> (ì¶”í›„ ë“±ë¡ ê°€ëŠ¥)</label>
          </div>

          <!-- 3) í™•ì¸ ì²´í¬ -->
          <label class="agree-line">
            <input id="chk-agree" type="checkbox" aria-describedby="agree-help">
            <span class="desc">ì•ˆë‚´ ë‚´ìš©ì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤.</span>
          </label>
          <div id="agree-help" class="help-line">í™•ì¸ ì²´í¬ í›„ì—ë§Œ â€˜ë‹¤ìŒâ€™ ë‹¨ê³„ë¡œ ì§„í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</div>
        </div>
      </section>
    </div>

    <div class="btn-area">
      <button type="button" id="btn-prev" class="btn-secondary">ì´ì „</button>
      <button type="button" id="btn-next" class="btn-primary" disabled>
        <span class="spinner" aria-hidden="true"></span>
        <span class="btn-text">ë‹¤ìŒ</span>
      </button>
    </div>
  </div>

  

  <!-- âœ… ìš”êµ¬ì‚¬í•­ ë³´ê¸° ë²„íŠ¼ -->
  <button type="button" id="btn-spec" class="req-trigger" title="ê¸°ëŠ¥ìš”êµ¬ì„œ í™•ì¸" aria-label="ê¸°ëŠ¥ìš”êµ¬ì„œ ë° ì£¼ì„ ë³´ê¸°">?</button>

  <!-- ìš”êµ¬ì‚¬í•­ ëª¨ë‹¬ -->
  <div id="modal-spec" class="modal-overlay" aria-hidden="true" role="dialog" aria-modal="true" aria-labelledby="modal-title">
    <div class="modal-content">
      <div class="modal-header">
        <h2 id="modal-title">ê¸°ëŠ¥ìš”êµ¬ì„œ ë° ì£¼ì„</h2>
        <button type="button" id="btn-modal-close" class="modal-close">ë‹«ê¸°</button>
      </div>
      <div id="modal-body" class="modal-body"></div>
    </div>
  </div>

<script>
    const SCREEN_ID = "0036";
/**
 * KBêµ­ë¯¼ì¹´ë“œ ê¸°ì—…ì¹´ë“œ ì‹ ì²­ í”„ë¡œì„¸ìŠ¤ - Step 0036
 * í™”ë©´ëª…: ê°œë³„ì¹´ë“œ ì‚¬ìš©ì ê°œì¸ëª…ì˜ê³„ì¢Œ ë“±ë¡ ì•ˆë‚´
 *
 * ğŸ”§ í¬ì¸íŠ¸(ì˜ˆì‹œ í…œí”Œë¦¿ êµ¬ì¡° ìœ ì§€)
 * 1) ì•ˆë‚´ ë¬¸êµ¬ + 'í™•ì¸í–ˆìŠµë‹ˆë‹¤' ì²´í¬ í•„ìˆ˜
 * 2) ë“±ë¡ ì—¬ë¶€ ì„ íƒ (ë“±ë¡/ë¹„ë“±ë¡). 'ë“±ë¡' ì„ íƒ ì‹œ íœ´ëŒ€í° ë²ˆí˜¸ ì…ë ¥ â†’ LMS ë°œì†¡(ëª¨í‚¹)
 * 3) ë‹¤ìŒ: 0037(ê°œë³„ì¹´ë“œ ë°œê¸‰ ëŒ€ìƒ ê³ ê° ì •ë³´-ê°œë³„)ë¡œ ì´ë™
 */
(function(){
  // =========================
  // 0) SSOT: í™”ë©´ ë©”íƒ€
  // =========================
  const META = {
    id: "0036",
    title: "ê°œë³„ì¹´ë“œ ì‚¬ìš©ì ê°œì¸ëª…ì˜ê³„ì¢Œ ë“±ë¡ ì•ˆë‚´",
    name: "ê°œë³„ì¹´ë“œ ì‚¬ìš©ì ê°œì¸ëª…ì˜ê³„ì¢Œ ë“±ë¡-ê°œë³„",
    nextTarget: "0037" // ë‹¤ìŒ ë‹¨ê³„
  };

  // íƒ­/ì œëª© ë™ê¸°í™”
  document.title = `KBêµ­ë¯¼ì¹´ë“œ | ${META.title} (${META.id})`;
  document.getElementById("title-text").textContent = META.title;
  document.getElementById("title-id").textContent = `(${META.id})`;

  // =========================
  // 1) DOM
  // =========================
  const toast     = document.getElementById("toast");
  const btnPrev   = document.getElementById("btn-prev");
  const btnNext   = document.getElementById("btn-next");
  const chkAgree  = document.getElementById("chk-agree");
  const subform   = document.getElementById("subform");
  const phone     = document.getElementById("phone");
  const radios    = Array.from(document.querySelectorAll('input[name="reg"]'));

  // Spec modal
  const specBtn    = document.getElementById("btn-spec");
  const modal      = document.getElementById("modal-spec");
  const modalClose = document.getElementById("btn-modal-close");

  // =========================
  // 2) Utils
  // =========================
  const showToast = (message) => {
    toast.textContent = message;
    toast.classList.add("show");
    setTimeout(() => toast.classList.remove("show"), 2300);
  };
  const digitsOnly = (s) => (s || "").replace(/\D/g, "");
  const formatPhone = (s) => {
    const d = digitsOnly(s).slice(0,11);
    if (d.length <= 3) return d;
    if (d.length <= 7) return `${d.slice(0,3)}-${d.slice(3)}`;
    return `${d.slice(0,3)}-${d.slice(3,7)}-${d.slice(7)}`;
  };
  const isValidPhone = (s) => /^01[0-9]-\d{3,4}-\d{4}$/.test(formatPhone(s));
  const selectedValue = () => {
    const r = radios.find(x => x.checked);
    return r ? r.value : "";
  };
  const updateNextState = () => {
    const sel = selectedValue();
    let ok = chkAgree.checked && !!sel;
    if (sel === "Y") {
      ok = ok && isValidPhone(phone.value);
    }
    if (!btnNext.classList.contains("is-loading")) btnNext.disabled = !ok;
  };
  const setLoading = (isLoading) => {
    btnNext.classList.toggle("is-loading", isLoading);
    btnNext.disabled = isLoading || btnNext.disabled;
  };
  const goTo = (id) => { location.hash = `#/${id}`; };

  // =========================
  // 3) Interactions
  // =========================
  radios.forEach(r => {
    r.addEventListener("change", () => {
      const sel = selectedValue();
      const show = sel === "Y";
      subform.classList.toggle("show", show);
      if (show) {
        // ì´ˆê¸° í¬ì»¤ìŠ¤/í¬ë§·
        if (!phone.value) phone.value = "";
        phone.focus();
      }
      updateNextState();
    });
  });

  phone.addEventListener("input", (e) => {
    const caret = e.target.selectionStart;
    const before = e.target.value.length;
    const formatted = formatPhone(e.target.value);
    e.target.value = formatted;
    const after = formatted.length;
    const delta = after - before;
    e.target.setSelectionRange(Math.max(0,(caret||after)+delta),Math.max(0,(caret||after)+delta));

    e.target.classList.toggle("is-invalid", !isValidPhone(e.target.value));
    updateNextState();
  });

  chkAgree.addEventListener("change", updateNextState);

  btnPrev.addEventListener("click", () => history.back());

  btnNext.addEventListener("click", async () => {
    if (btnNext.classList.contains("is-loading")) return;

    const sel = selectedValue();
    if (!chkAgree.checked) { showToast("ì•ˆë‚´ ë‚´ìš©ì„ í™•ì¸í•´ ì£¼ì„¸ìš”."); return; }
    if (!sel) { showToast("ê°œì¸ëª…ì˜ ê³„ì¢Œ ë“±ë¡ ì—¬ë¶€ë¥¼ ì„ íƒí•´ ì£¼ì„¸ìš”."); return; }
    if (sel === "Y" && !isValidPhone(phone.value)) { showToast("ìœ íš¨í•œ íœ´ëŒ€í° ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”."); phone.focus(); return; }

    setLoading(true);
    try {
      if (sel === "Y") {
        // ì‹¤ì œ: LMS ë°œì†¡ API â†’ ì‘ë‹µ(ìš”ì²­ID/ìœ íš¨ê¸°ê°„) ë³´ê´€
        await new Promise(res => setTimeout(res, 650)); // ëª¨í‚¹
        showToast("LMSë¥¼ ë°œì†¡í–ˆìŠµë‹ˆë‹¤. 3ì¼ ë‚´ ê³„ì¢Œ ë“±ë¡ì„ ì™„ë£Œí•´ ì£¼ì„¸ìš”.");
      }
      await new Promise(res => setTimeout(res, 300));
      if (window.ScenarioNav) {
ScenarioNav.goNext();
      } else {
            goTo(META.nextTarget);
          }
        }
      }
    } finally {
      setLoading(false);
    }
  });

  // =========================
  // 4) Spec modal (ìš”ê±´ì •ì˜ì„œ/ì£¼ì„)
  // =========================
  const REQ_SPEC = {
    screen_id: META.id,
    screen_name: META.name,
    purpose: "ê°œë³„ì¹´ë“œ ì‚¬ìš©ìì˜ ê°œì¸ëª…ì˜ ê²°ì œê³„ì¢Œ ë“±ë¡ ì—¬ë¶€ë¥¼ í™•ì¸í•˜ê³ , ë“±ë¡ ì‹œ LMSë¥¼ ë°œì†¡í•˜ì—¬ ê³„ì¢Œ ë“±ë¡ í”„ë¡œì„¸ìŠ¤(ë³„ë„)ë¥¼ ì‹œì‘í•œë‹¤.",
    business_rule_source: "í™”ë©´ê¸°ëŠ¥ëª©ë¡ ID:0036 (ê°œë³„ì¹´ë“œ ì‚¬ìš©ì ê°œì¸ëª…ì˜ê³„ì¢Œ ë“±ë¡-ê°œë³„)",
    target: { corp: true, sole: false }, // í‘œ ì›ë¬¸: ë²•ì¸ Y / ê°œì¸ N
    action: "ê³ ê°ë™ì˜",
    inputs: {
      agree_check: { id:"chk-agree", label:"ì•ˆë‚´ ë‚´ìš©ì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤.", required:true },
      register_choice: { name:"reg", values:["Y(ë“±ë¡)","N(ë¹„ë“±ë¡)"], required:true },
      phone_when_register: { id:"phone", required_if:"reg=Y", format:"010-1234-5678", validate:"/^01[0-9]-\\d{3,4}-\\d{4}$/" }
    },
    processing: {
      integration: true,
      domain: "íšŒì›",
      purpose: "ê°œë³„ì¹´ë“œ ê°œì¸ëª…ì˜ ê³„ì¢Œ ë“±ë¡ í”„ë¡œì„¸ìŠ¤ ì‹œì‘",
      description: "reg=Y ì„ íƒ ì‹œ LMS ì‹¤ì‹œê°„ ë°œì†¡(ìœ íš¨ê¸°ê°„ 3ì¼) â†’ ê³ ê°ì´ ë³„ë„ ë§í¬ë¡œ ê³„ì¢Œ ì¸ì¦/ë“±ë¡ ì§„í–‰. reg=Nì´ë©´ ìŠ¤í‚µ.",
      events: ["LMS_SENT","SKIPPED"]
    },
    rules: [
      "â€˜ì•ˆë‚´ í™•ì¸â€™ ì²´í¬ ì „ê¹Œì§€ ë‹¤ìŒ ë¹„í™œì„±",
      "ë“±ë¡ ì—¬ë¶€ ì„ íƒ í•„ìˆ˜",
      "reg=Yì¸ ê²½ìš° íœ´ëŒ€í° ë²ˆí˜¸ ìœ íš¨ì„±(êµ­ë‚´ 10~11ìë¦¬ í•˜ì´í”ˆ í¬ë§·) ì¶©ì¡± í•„ìˆ˜",
      "LMS ë§í¬ ìœ íš¨ê¸°ê°„: ë°œì†¡ì¼ í¬í•¨ 3ì¼ (ë§Œë£Œ ì•ˆë‚´/ì¬ë°œì†¡ ì •ì±… ë³„ë„)"
    ],
    qa_points: [
      "ë¼ë””ì˜¤ ì „í™˜ ì‹œ ë³´ì¡° í¼(íœ´ëŒ€í°) show/hide",
      "íœ´ëŒ€í° í¬ë§· ìë™í™” ë° ì»¤ì„œ ë³´ì •",
      "LMS ë°œì†¡ ì‹¤íŒ¨/ì§€ì—° ì‹œ ì¬ì‹œë„ ë° ì‚¬ìš©ì ì•ˆë‚´",
      "ë’¤ë¡œê°€ê¸° ì¬ì§„ì… ì‹œ ì„ íƒ/ì…ë ¥ê°’ ë³´ì¡´ ì •ì±…"
    ],
    next: { success: "0037 (ê°œë³„ì¹´ë“œ ë°œê¸‰ ëŒ€ìƒ ê³ ê° ì •ë³´-ê°œë³„)" }
  };

  const renderSpec = () => {
    const body = document.getElementById("modal-body");
    const title = document.getElementById("modal-title");
    if (title) title.textContent = `ê¸°ëŠ¥ìš”êµ¬ì„œ ë° ì£¼ì„ (${META.id})`;

    body.innerHTML = `
      <table class="spec-table">
        <tr><th>í™”ë©´ ID</th><td>${REQ_SPEC.screen_id}</td></tr>
        <tr><th>í™”ë©´ëª…</th><td>${REQ_SPEC.screen_name}</td></tr>
        <tr><th>ëª©ì </th><td>${REQ_SPEC.purpose}</td></tr>
        <tr><th>ê·¼ê±°</th><td>${REQ_SPEC.business_rule_source}</td></tr>
        <tr><th>Action</th><td>${REQ_SPEC.action}</td></tr>
      </table>

      <div class="spec-section">
        <h3>ì…ë ¥</h3>
        <ul>
          <li>ì²´í¬ë°•ìŠ¤: â€˜ì•ˆë‚´ ë‚´ìš©ì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤.â€™ (í•„ìˆ˜)</li>
          <li>ë¼ë””ì˜¤: ë“±ë¡/ë¹„ë“±ë¡ (í•„ìˆ˜)</li>
          <li>íœ´ëŒ€í° ë²ˆí˜¸ (ë“±ë¡ ì„ íƒ ì‹œ í•„ìˆ˜, í¬ë§·: 010-1234-5678)</li>
        </ul>
      </div>

      <div class="spec-section">
        <h3>ì²˜ë¦¬ê³„ ì—°ë™</h3>
        <ul>
          <li>LMS ì‹¤ì‹œê°„ ë°œì†¡ (reg=Y)</li>
          <li>ìœ íš¨ê¸°ê°„: LMS ë°œì†¡ì¼ í¬í•¨ 3ì¼</li>
        </ul>
      </div>

      <div class="spec-section">
        <h3>ê·œì¹™</h3>
        <ul>${REQ_SPEC.rules.map(x => `<li>${x}</li>`).join("")}</ul>
      </div>

      <div class="spec-section">
        <h3>QA / ê°œë°œ ì²´í¬ë¦¬ìŠ¤íŠ¸</h3>
        <ul>${REQ_SPEC.qa_points.map(x => `<li>${x}</li>`).join("")}</ul>
      </div>

      <div class="spec-section">
        <h3>ë°ì´í„° ìŠ¤í™ (JSON)</h3>
        <div class="json-code">${JSON.stringify(REQ_SPEC, null, 2)}</div>
      </div>
    `;
  };

  const openModal = () => {
    renderSpec();
    modal.classList.add("show");
    modal.setAttribute("aria-hidden","false");
    document.body.style.overflow = "hidden";
    modalClose.focus();
  };
  const closeModal = () => {
    modal.classList.remove("show");
    modal.setAttribute("aria-hidden","true");
    document.body.style.overflow = "";
    specBtn.focus();
  };
  specBtn.addEventListener("click", openModal);
  modalClose.addEventListener("click", closeModal);
  modal.addEventListener("click", (e) => { if (e.target === modal) closeModal(); });
  document.addEventListener("keydown", (e) => { if (e.key !== "Escape") return; if (modal.classList.contains("show")) closeModal(); });

  // init
  updateNextState();
})();
</script>
<script src="js/common.js"></script>
<script src="js/session-db.js"></script>
<script src="js/scenario-nav.js"></script>
<script src="js/spec-viewer.js" data-screen-id="0036"></script>
</body>
</html>