<!doctype html>
<html lang="ko">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>KBêµ­ë¯¼ì¹´ë“œ | ê¸°ì—…ì¹´ë“œ ë¹„ëŒ€ë©´ ì‹ ì²­ ëª©ì—…</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
        integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/variable/pretendardvariable-dynamic-subset.min.css" />
    <link rel="stylesheet" href="css/kb-theme.css" />
    <style>
        :root {
            --yellow: #ffcc00;
            --yellow-d: #f2b800;
            --text: #111;
            --muted: #666;
            --line: #e0e0e0;
            --panel: #fafafa;
            --danger: #d64545;
            --blue: #2563eb;
            --radius: 12px;
            --shadow: 0 4px 24px rgba(0, 0, 0, .10);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Noto Sans KR", sans-serif;
            background: #f0f2f5;
            color: var(--text);
            min-height: 100vh;
        }

        /* Header */
        .hd {
            background: #1a1a1a;
            color: #fff;
            padding: 18px 32px;
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .hd-logo {
            background: var(--yellow);
            color: #000;
            font-weight: 900;
            font-size: 13px;
            padding: 6px 12px;
            border-radius: 6px;
            letter-spacing: .5px;
        }

        .hd-title {
            font-size: 18px;
            font-weight: 800;
        }

        .hd-badge {
            margin-left: auto;
            background: rgba(255, 204, 0, .15);
            border: 1px solid rgba(255, 204, 0, .35);
            color: var(--yellow);
            font-size: 12px;
            font-weight: 900;
            padding: 4px 12px;
            border-radius: 20px;
        }

        /* Main layout */
        .main {
            max-width: 1080px;
            margin: 0 auto;
            padding: 32px 20px 80px;
        }

        /* Hero stat bar */
        .stats {
            display: flex;
            gap: 12px;
            margin-bottom: 28px;
            flex-wrap: wrap;
        }

        .stat {
            background: #fff;
            border-radius: 10px;
            padding: 14px 20px;
            flex: 1;
            min-width: 140px;
            box-shadow: var(--shadow);
            text-align: center;
        }

        .stat-n {
            font-size: 28px;
            font-weight: 900;
            color: var(--text);
        }

        .stat-l {
            font-size: 12px;
            color: var(--muted);
            font-weight: 700;
            margin-top: 2px;
        }

        .stat-n .hl {
            color: var(--blue);
        }

        /* Wizard card */
        .card {
            background: #fff;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            overflow: hidden;
            margin-bottom: 24px;
        }

        .card-head {
            padding: 18px 24px;
            border-bottom: 1px solid var(--line);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .step-num {
            width: 28px;
            height: 28px;
            background: var(--yellow);
            border-radius: 50%;
            font-size: 13px;
            font-weight: 900;
            display: flex;
            align-items: center;
            justify-content: center;
            flex: 0 0 auto;
        }

        .step-num.done {
            background: #22c55e;
            color: #fff;
        }

        .step-num.disabled-n {
            background: #e5e5e5;
            color: #aaa;
        }

        .card-title {
            font-size: 16px;
            font-weight: 900;
        }

        .card-body {
            padding: 18px 24px;
        }

        /* Option buttons */
        .opts {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .opt {
            padding: 12px 24px;
            border-radius: 10px;
            border: 2px solid var(--line);
            background: #fff;
            font-size: 15px;
            font-weight: 800;
            cursor: pointer;
            transition: all .15s;
            color: var(--text);
            position: relative;
        }

        .opt:hover {
            border-color: #bbb;
            background: #fafafa;
        }

        .opt.selected {
            border-color: var(--yellow-d);
            background: #fffbe6;
            box-shadow: 0 0 0 3px rgba(255, 204, 0, .25);
        }

        .opt.disabled {
            opacity: .38;
            cursor: not-allowed;
            pointer-events: none;
        }

        .opt .badge-na {
            position: absolute;
            top: -6px;
            right: -6px;
            background: var(--danger);
            color: #fff;
            font-size: 10px;
            font-weight: 900;
            padding: 2px 6px;
            border-radius: 10px;
        }

        /* Step disabled overlay */
        .step-disabled {
            opacity: .45;
            pointer-events: none;
        }

        /* Breadcrumb path */
        .breadcrumb {
            padding: 14px 24px;
            background: #fffbe6;
            border-top: 1px solid #f0d800;
            font-size: 13px;
            font-weight: 800;
            color: #555;
            display: flex;
            gap: 6px;
            align-items: center;
            flex-wrap: wrap;
        }

        .bc-item {
            color: var(--text);
            font-weight: 900;
        }

        .bc-sep {
            color: #bbb;
        }

        .bc-code {
            color: #2563eb;
            font-weight: 900;
            font-size: 12px;
            background: #eff6ff;
            padding: 2px 8px;
            border-radius: 6px;
            margin-left: 6px;
        }

        /* Result panel */
        #result-panel {
            background: #fff;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            overflow: hidden;
        }

        .rp-head {
            padding: 18px 24px;
            background: #1a1a1a;
            color: #fff;
            display: flex;
            align-items: center;
            gap: 12px;
            flex-wrap: wrap;
        }

        .rp-scenario {
            font-size: 17px;
            font-weight: 900;
        }

        .rp-code {
            font-size: 12px;
            background: rgba(255, 204, 0, .2);
            color: var(--yellow);
            padding: 3px 10px;
            border-radius: 8px;
            font-weight: 900;
        }

        .rp-count {
            margin-left: auto;
            font-size: 13px;
            color: #aaa;
            font-weight: 800;
        }

        /* â”€â”€â”€ ì‹œë‚˜ë¦¬ì˜¤ í”Œë¡œìš° Flex (í™”ì‚´í‘œ í¬í•¨) â”€â”€â”€ */
        .screens-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            align-items: stretch;
            padding: 10px 4px;
        }

        .flow-unit {
            display: flex;
            align-items: center;
            /* ì¹´ë“œ + í™”ì‚´í‘œ ë¬¶ìŒ */
        }

        .scr {
            position: relative;
            display: flex;
            flex-direction: column;
            background: #fff;
            border: 1px solid #e0e0e0;
            border-left: 5px solid #ffcc00;
            /* KB Yellow Line */
            border-radius: 8px;
            padding: 14px 16px;
            text-decoration: none;
            transition: all .2s cubic-bezier(0.25, 0.8, 0.25, 1);
            box-shadow: 0 2px 6px rgba(0, 0, 0, .04);
            width: 200px;
            /* ê³ ì • ë„ˆë¹„ë¡œ ì •ë ¬ê° í™•ë³´ */
            min-height: 86px;
            justify-content: center;
        }

        .scr:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 24px rgba(0, 0, 0, .12);
            border-color: #d0d0d0;
            z-index: 2;
        }

        .scr:active {
            transform: translateY(-1px);
        }

        .scr.na {
            background: #fdfdfd;
            border-left-color: #ddd;
            border-style: solid;
            opacity: .7;
        }

        .scr-seq {
            font-size: 13px;
            font-weight: 900;
            color: #dcb000;
            margin-bottom: 6px;
            letter-spacing: -0.5px;
            display: flex;
            justify-content: space-between;
        }

        .scr:hover .scr-seq {
            color: #f2b800;
        }

        .scr-id {
            font-size: 11px;
            color: #999;
            font-weight: 600;
        }

        .scr-name {
            display: block;
            font-size: 14px;
            color: #222;
            font-weight: 700;
            line-height: 1.35;
            word-break: keep-all;
        }

        .flow-arrow {
            margin: 0 10px;
            color: #ddd;
            font-size: 16px;
            display: flex;
            align-items: center;
        }

        .flow-unit:hover .flow-arrow {
            color: #ffcc00;
        }

        .na-tag {
            display: inline-block;
            font-size: 10px;
            background: #eee;
            color: #777;
            padding: 2px 5px;
            border-radius: 4px;
            margin-left: 6px;
            vertical-align: middle;
            font-weight: normal;
        }

        .rp-note {
            padding: 14px 24px;
            background: #f8f9fa;
            border-top: 1px solid var(--line);
            font-size: 12px;
            color: #666;
            line-height: 1.8;
        }

        /* Empty / placeholder */
        .empty {
            padding: 48px 24px;
            text-align: center;
            color: #bbb;
            font-size: 15px;
        }

        .empty svg {
            opacity: .3;
            margin-bottom: 12px;
        }

        /* Info bar about total */
        .total-bar {
            background: #1a1a1a;
            color: #fff;
            border-radius: 10px;
            padding: 14px 22px;
            margin-bottom: 24px;
            display: flex;
            align-items: center;
            gap: 10px;
            flex-wrap: wrap;
        }

        .total-bar strong {
            color: var(--yellow);
            font-size: 18px;
        }

        @media(max-width:600px) {
            .opts {
                flex-direction: column;
            }

            .opt {
                text-align: left;
            }

            .screens-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>

<body>

    <div class="hd">
        <div class="hd-logo">KBêµ­ë¯¼ì¹´ë“œ</div>
        <div class="hd-title">ê¸°ì—…ì¹´ë“œ ë¹„ëŒ€ë©´ ì‹ ì²­ â€” ëª©ì—… í…ŒìŠ¤íŠ¸</div>
        <div style="margin-left:auto; display:flex; gap:10px; align-items:center;">
            <a href="integrated_flow.html" class="kb-btn"
                style="background:#333; border:1px solid #555; color:#fff; font-size:13px; padding:6px 14px; text-decoration:none; border-radius:6px; display:flex; align-items:center; gap:6px;">
                <i class="fa-solid fa-layer-group" style="color:#ffcc00"></i> í†µí•© ì‹œë‚˜ë¦¬ì˜¤ë¡œ ì´ë™
            </a>
            <div class="hd-badge">ì´ 16ê°œ ì‹œë‚˜ë¦¬ì˜¤</div>
        </div>
    </div>

    <div class="main">

        <!-- Stats -->
        <div class="stats">
            <div class="stat">
                <div class="stat-n"><span class="hl">16</span></div>
                <div class="stat-l">ì „ì²´ ì‹œë‚˜ë¦¬ì˜¤</div>
            </div>
            <div class="stat">
                <div class="stat-n">6</div>
                <div class="stat-l">ë²•ì‚¬ì_ì‹ ìš©</div>
            </div>
            <div class="stat">
                <div class="stat-n">6</div>
                <div class="stat-l">ë²•ì‚¬ì_ì²´í¬</div>
            </div>
            <div class="stat">
                <div class="stat-n">2</div>
                <div class="stat-l">ê°œì‚¬ì_ì‹ ìš©</div>
            </div>
            <div class="stat">
                <div class="stat-n">2</div>
                <div class="stat-l">ê°œì‚¬ì_ì²´í¬</div>
            </div>
        </div>

        <!-- ë¶„ê¸° ì•ˆë‚´ -->
        <div class="total-bar">
            <span>ë¶„ê¸° êµ¬ì¡°:</span>
            <strong>ì¹´ë“œì¢…ë¥˜</strong><span style="color:#aaa">â†’</span>
            <strong>ì‚¬ì—…ììœ í˜•</strong><span style="color:#aaa">â†’</span>
            <strong>ì‹ ê·œ/ì¶”ê°€</strong><span style="color:#aaa">â†’</span>
            <strong>ê³µìš©/ê°œë³„ (ë²•ì‚¬ì)</strong><span style="color:#aaa">â†’</span>
            <strong>ë¶€ì„œë‚´ì¶”ê°€/ë¶€ì„œì¶”ê°€ (ë²•ì‚¬ì_ì¶”ê°€)</strong>
        </div>

        <!-- STEP 1: ì¹´ë“œ ì¢…ë¥˜ -->
        <div class="card" id="step1">
            <div class="card-head">
                <div class="step-num" id="sn1">1</div>
                <div class="card-title">ì¹´ë“œ ì¢…ë¥˜ë¥¼ ì„ íƒí•˜ì„¸ìš”</div>
            </div>
            <div class="card-body">
                <div class="opts">
                    <button class="opt" data-step="1" data-val="ì‹ ìš©">ğŸ’³ ì‹ ìš©ì¹´ë“œ</button>
                    <button class="opt" data-step="1" data-val="ì²´í¬">ğŸ§ ì²´í¬ì¹´ë“œ</button>
                </div>
            </div>
        </div>

        <!-- STEP 2: ì‚¬ì—…ì ìœ í˜• -->
        <div class="card step-disabled" id="step2">
            <div class="card-head">
                <div class="step-num disabled-n" id="sn2">2</div>
                <div class="card-title">ì‚¬ì—…ì ìœ í˜•ì„ ì„ íƒí•˜ì„¸ìš”</div>
            </div>
            <div class="card-body">
                <div class="opts">
                    <button class="opt disabled" data-step="2" data-val="ë²•ì‚¬ì">ğŸ¢ ë²•ì¸ì‚¬ì—…ì</button>
                    <button class="opt disabled" data-step="2" data-val="ê°œì‚¬ì">ğŸ‘¤ ê°œì¸ì‚¬ì—…ì</button>
                </div>
            </div>
        </div>

        <!-- STEP 3: ì‹ ê·œ/ì¶”ê°€ -->
        <div class="card step-disabled" id="step3">
            <div class="card-head">
                <div class="step-num disabled-n" id="sn3">3</div>
                <div class="card-title">ë°œê¸‰ êµ¬ë¶„ì„ ì„ íƒí•˜ì„¸ìš”</div>
            </div>
            <div class="card-body">
                <div class="opts" id="opts3">
                    <button class="opt disabled" data-step="3" data-val="ì‹ ê·œ">ğŸ†• ì‹ ê·œ</button>
                    <button class="opt disabled" data-step="3" data-val="ì¶”ê°€">â• ì¶”ê°€</button>
                </div>
                <div id="step3-note" style="margin-top:10px;font-size:12px;color:var(--muted);display:none;"></div>
            </div>
        </div>

        <!-- STEP 4: ê³µìš©/ê°œë³„ (ë²•ì‚¬ìë§Œ) -->
        <div class="card step-disabled" id="step4">
            <div class="card-head">
                <div class="step-num disabled-n" id="sn4">4</div>
                <div class="card-title">ì¹´ë“œ ë°œê¸‰ ë°©ì‹ì„ ì„ íƒí•˜ì„¸ìš” <span
                        style="font-size:12px;color:var(--muted);font-weight:700;">(ë²•ì¸ì‚¬ì—…ì ì „ìš©)</span></div>
            </div>
            <div class="card-body">
                <div class="opts">
                    <button class="opt disabled" data-step="4" data-val="ê³µìš©">ğŸ¢ ê³µìš©ì¹´ë“œ</button>
                    <button class="opt disabled" data-step="4" data-val="ê°œë³„">ğŸ‘¤ ê°œë³„ì¹´ë“œ</button>
                </div>
            </div>
        </div>

        <!-- STEP 5: ë¶€ì„œë‚´ì¶”ê°€/ë¶€ì„œì¶”ê°€ (ë²•ì‚¬ì_ì¶”ê°€ë§Œ) -->
        <div class="card step-disabled" id="step5">
            <div class="card-head">
                <div class="step-num disabled-n" id="sn5">5</div>
                <div class="card-title">ë¶€ì„œ ë°œê¸‰ ë°©ì‹ì„ ì„ íƒí•˜ì„¸ìš” <span
                        style="font-size:12px;color:var(--muted);font-weight:700;">(ì¶”ê°€ë°œê¸‰/ê³µìš©ì¹´ë“œ ì „ìš©)</span></div>
            </div>
            <div class="card-body">
                <div class="opts">
                    <button class="opt disabled" data-step="5" data-val="ë¶€ì„œë‚´ì¶”ê°€">ğŸ“‚ ë¶€ì„œë‚´ì¶”ê°€</button>
                    <button class="opt disabled" data-step="5" data-val="ë¶€ì„œì¶”ê°€">ğŸ†• ë¶€ì„œì¶”ê°€</button>
                </div>
            </div>
        </div>

        <!-- ì„ íƒ ê²½ë¡œ í‘œì‹œ -->
        <div id="breadcrumb" style="display:none;" class="card">
            <div class="breadcrumb" id="bc-inner"></div>
        </div>

        <!-- ê²°ê³¼ íŒ¨ë„ -->
        <div id="result-panel" style="display:none;">
            <div class="rp-head">
                <div class="rp-scenario" id="rp-scenario">â€”</div>
                <div class="rp-code" id="rp-code">â€”</div>
                <div class="rp-count" id="rp-count">â€”</div>
            </div>
            <div class="screens-grid" id="screens-grid"></div>
            <div class="rp-note" id="rp-note"></div>
            <!-- ì‹œë‚˜ë¦¬ì˜¤ ì‹œì‘ ë²„íŠ¼ -->
            <div
                style="padding:20px 24px;border-top:1px solid var(--line);display:flex;align-items:center;gap:16px;flex-wrap:wrap;">
                <button id="btn-start-scenario" type="button" class="kb-btn"
                    style="font-size:16px;height:52px;padding:0 36px;">
                    ğŸš€ ì‹œë‚˜ë¦¬ì˜¤ ì‹œì‘
                </button>
                <span style="font-size:13px;color:#888;">ì²« í™”ë©´(0001)ë¶€í„° ìˆœì„œëŒ€ë¡œ ì§„í–‰í•©ë‹ˆë‹¤</span>
            </div>
        </div>

        <div id="result-empty" class="card">
            <div class="empty">ë‹¨ê³„ë³„ë¡œ ì„ íƒí•˜ë©´ í•´ë‹¹ ì‹œë‚˜ë¦¬ì˜¤ì˜ í™”ë©´ ëª©ë¡ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</div>
        </div>

    </div><!-- /main -->

    <script src="js/session-db.js"></script>
    <script>
        // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        // ìƒíƒœ
        // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        const sel = { card: null, biz: null, issuance: null, cardType: null, dept: null };

        // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        // í™”ë©´ ì´ë¦„ ë§µ
        // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        const NAMES = {
            "0001": "ì‚¬ì—…ìë²ˆí˜¸ ì…ë ¥", "0002": "ì‹ ê·œ ëŒ€ìƒ í†µí•© ë°œê¸‰ ì•ˆë‚´", "0003": "ì¶”ê°€ ëŒ€ìƒ í†µí•© ë°œê¸‰ ì•ˆë‚´",
            "0004": "ì¤€ë¹„ì‚¬í•­", "0005": "ì œì¶œì„œë¥˜", "0006": "ì„œë¥˜ìë™ì œì¶œì„œë¹„ìŠ¤", "0007": "ìœ ì˜ì‚¬í•­",
            "0008": "ë²•ì¸ ê³µë™ì¸ì¦ì„œ ì´ìš©ì•ˆë‚´", "0009": "ì‹ ìš©ì¹´ë“œ ìƒí’ˆ ì•½ê´€ë™ì˜", "0010": "ì‹ ì²­ì¸ì •ë³´",
            "0011": "ì‹ ì²­ì ì‹ ìš©ì •ë³´ ì¡°íšŒ ì´ìš© ë™ì˜", "0012": "ì‹ ì²­ì¸ ë³¸ì¸ì¸ì¦", "0013": "ì‹ ì²­ì¸ CDD ì¡°ê±´ë¶€ ê²€ì¦",
            "0014": "ëŒ€í‘œì ì •ë³´", "0015": "ì‚¬ì—…ì ì •ë³´", "0016": "ë²•ì¸ ì •ë³´", "0017": "EDDì •ë³´",
            "0018": "í•„ìˆ˜í™•ì¸ì‚¬í•­", "0019": "ì´ìš©í•œë„", "0020": "ëª…ì„¸ì„œ ë°›ìœ¼ì‹¤ ê³³", "0021": "ì¹´ë“œì„ íƒ",
            "0022": "ê²°ì œì¼", "0023": "ê²°ì œê³„ì¢Œ", "0024": "ì‹ ì²­ë§¤ìˆ˜", "0025": "ë°œê¸‰ í™•ì¸ ë° ì•½ê´€ìˆ˜ë ¹",
            "0026": "ì¹´ë“œìˆ˜ë ¹ì§€", "0027": "ì¶”ì²œì¸", "0028": "ê³µë™ì¸ì¦ì„œ ì¸ì¦", "0029": "ì¹´ë“œì •ë³´(í™•ì¸ìš©)",
            "0030": "ì‚¬ì—…ìì •ë³´(í™•ì¸ìš©)", "0031": "ëŒ€í‘œìì •ë³´(í™•ì¸ìš©)", "0032": "ë²•ì¸ì¸ì¦", "0033": "ì¶”ê°€ì„œë¥˜ì œì¶œ",
            "0034": "ì‹ ì²­ì™„ë£Œ", "0035": "ê°œë³„ì¹´ë“œ íšŒì› ë™ì˜ì„œ ì‘ì„±ì•ˆë‚´", "0036": "ê°œë³„ì¹´ë“œ ê°œì¸ëª…ì˜ê³„ì¢Œ ë“±ë¡",
            "0037": "ê°œë³„ì¹´ë“œ ë°œê¸‰ ëŒ€ìƒ ê³ ê° ì •ë³´", "0038": "ê°œë³„ì¹´ë“œ ë™ì˜ ì¡°íšŒ(ì¡°íšŒí•˜ê¸°)",
            "0039": "ê°œì¸ì‹ ìš©ì •ë³´ ë™ì˜ì„œ", "0040": "ê°œë³„ì¹´ë“œ ë™ì˜ ì¡°íšŒ(ì‹ ì²­í•˜ê¸°)", "0041": "ê°œë³„ì¹´ë“œ",
            "0042": "ë²•ì¸ EDDì •ë³´", "0043": "ë°œê¸‰ ëŒ€ìƒ ë¶€ì„œ íŒì—…", "0044": "ê°œë³„ì¹´ë“œ ë™ì˜ ì¡°íšŒ(ì¶”ê°€ì „ìš©)",
            "0045": "ê¸°ë³¸ì •ë³´", "0046": "ìœ ì˜ ë° ì¤€ë¹„ì‚¬í•­(ì¶”ê°€ê°œë³„)", "0047": "ëŒ€í‘œì_ì‚¬ì—…ìì •ë³´",
            "0048": "ì—…ì²´(ë¶€ì„œ)ì •ë³´", "0049": "ê¸°ë³¸ì •ë³´2", "0050": "ë¶€ì„œë³„í•œë„(ìš”ì²­í•œë„ ì…ë ¥)",
            "0051": "ì—…ì²´(ë¶€ì„œ)ì •ë³´(í™•ì¸ìš©)", "0052": "ì‹ ì²­ì™„ë£Œ_ì¹´ë“œì‹ ì²­ì •ë³´(í™•ì¸ìš©)",
            "0053": "ìœ ì˜ ë° ì¤€ë¹„ì‚¬í•­(ê°œì‚¬ì_ì‹ ìš©)", "0054": "ì¶”ê°€ì •ë³´ì„ íƒ", "0055": "ì•½ê´€ë™ì˜(ì‹ ìš©)",
            "0057": "ì¹´ë“œì‹ ì²­ ê¸°ë³¸_CDD", "0058": "3ì¢… ë³¸ì¸ì¸ì¦", "0059": "ì„¤ë¦½ë…„ì›”ì¼_ì—…ì¢…ë¶„ë¥˜",
            "0060": "í•œë„ë¶€ì—¬ê²°ê³¼ ì¡°íšŒ", "0061": "ì‹ ë¶„ì¦ ì •ë³´", "0062": "í•„ìˆ˜í™•ì¸ì‚¬í•­(ê°œì‚¬ì)",
            "0063": "ì¹´ë“œì •ë³´(ê°œì‚¬ì)", "0064": "ì¹´ë“œì •ë³´ìˆ˜ì •í•˜ê¸°", "0065": "ì¹´ë“œì‹ ì²­ì™„ë£Œ",
            "0066": "ìœ ì˜ ë° ì¤€ë¹„ì‚¬í•­(ê°œì‚¬ì_ì²´í¬)", "0067": "ì‹ ë¶„ì¦ì§„ìœ„í™•ì¸ ë°©ë²• ì„ íƒ",
            "0068": "ì‹ ë¶„ì¦ì •ë³´ ì…ë ¥", "0069": "ë³¸ì¸í™•ì¸", "0070": "ì‹ ì²­ì •ë³´_CDD",
            "0071": "ì‹ ì²­ì •ë³´_ì„¤ë¦½ë…„ì›”", "0072": "ì•½ê´€ë™ì˜(ê°œì‚¬ì_ì²´í¬)", "0073": "ì‹ ì²­ì •ë³´_ìˆ˜ì •í•˜ê¸°",
            "0074": "ì ‘ìˆ˜ì™„ë£Œ(ê°œì‚¬ì_ì²´í¬)",
            // ì‹ ê·œ ì¶”ê°€ëœ ì²´í¬ì¹´ë“œ í™”ë©´
            "0009_1": "ì²´í¬ì¹´ë“œ ìƒí’ˆ ì•½ê´€ë™ì˜", "0011_1": "ì²´í¬ì •ë³´ ì¡°íšŒ ì´ìš© ë™ì˜",
            "0039_1": "ê°œì¸ì²´í¬ì •ë³´ ë™ì˜ì„œ"
        };

        // íŒŒì¼ëª… ê²°ì •
        function screenFile(id) {
            if (id.startsWith("N/A")) return null;
            if (id.includes("_1")) return id + "_r.html"; // ì²´í¬ì¹´ë“œ ì „ìš©
            const n = parseInt(id, 10);
            if (n === 8) return "0008_R.HTML";
            if (n <= 24) return id + "_r.HTML";
            return id + "_r.html";
        }

        // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        // ì‹œë‚˜ë¦¬ì˜¤ ì •ì˜
        // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        const BASE_COMMON = ["0001", "0004", "0005", "0006", "0007", "0008"];
        const BASE_NEW = ["0001", "0002", "0004", "0005", "0006", "0007", "0008"];
        const BASE_ADD = ["0001", "0003", "0004", "0005", "0006", "0007", "0008"];
        const TAIL_CREDIT = ["0010", "0011", "0012", "0013", "0014", "0015", "0016", "0017", "0018", "0019", "0020", "0021", "0022", "0023", "0024", "0025", "0026", "0027", "0028", "0029", "0030", "0031", "0032", "0033", "0034"];
        const TAIL_CHECK = ["0010", "0011_1", "0012", "0013", "0014", "0015", "0016", "0017", "0018", "0020", "0021", "0022", "0023", "0024", "0025", "0026", "0027", "0028", "0029", "0030", "0031", "0032", "0033", "0034"];
        const INDIV_NEW = ["0035", "0036", "0037", "0038", "0039", "0040", "0041"];
        const DEPT_IN_TAIL_C = ["0009", "0043", "0010", "0011", "0012", "0013", "0018", "0045", "0021", "0024", "0025", "0026", "0042", "0027", "0028", "0029", "0051", "0032", "0052"];
        const DEPT_ADD_TAIL_C = ["0009", "0043", "0047", "0048", "0049", "0050", "0020", "0021", "0022", "0023", "0024", "0025", "0026", "0042", "0027", "0028", "0029", "0051", "0032", "0052"];
        const DEPT_IN_TAIL_CHK = ["0009_1", "0043", "0010", "0011_1", "0012", "0013", "0018", "0045", "0021", "0024", "0025", "0026", "0042", "0027", "0028", "0029", "0051", "0032", "0052"];
        const DEPT_ADD_TAIL_CHK = ["0009_1", "0043", "0047", "0048", "0049", "0050", "0020", "0021", "0022", "0023", "0024", "0025", "0026", "0042", "0027", "0028", "0029", "0051", "0032", "0052"];
        const INDIV_ADD_EXTRA = ["0035", "0036", "0037", "0038", "0039", "0044", "0046"];

        const SCENARIOS = {
            // ë²•ì‚¬ì_ì‹ ìš© (6)
            "ë²•_ì‹ _ì‹ ê·œ_ê³µìš©": { code: "SC-01-A", label: "ë²•ì‚¬ì_ì‹ ìš© | ì‹ ê·œ | ê³µìš©", screens: [...BASE_NEW, "0009", ...TAIL_CREDIT] },
            "ë²•_ì‹ _ì‹ ê·œ_ê°œë³„": { code: "SC-01-B", label: "ë²•ì‚¬ì_ì‹ ìš© | ì‹ ê·œ | ê°œë³„", screens: [...BASE_NEW, ...INDIV_NEW, ...TAIL_CREDIT] },
            "ë²•_ì‹ _ì¶”ê°€_ê³µìš©_ë¶€ì„œë‚´": { code: "SC-01-C", label: "ë²•ì‚¬ì_ì‹ ìš© | ì¶”ê°€ | ê³µìš© | ë¶€ì„œë‚´ì¶”ê°€", screens: [...BASE_ADD, ...DEPT_IN_TAIL_C] },
            "ë²•_ì‹ _ì¶”ê°€_ê³µìš©_ë¶€ì„œì¶”": { code: "SC-01-D", label: "ë²•ì‚¬ì_ì‹ ìš© | ì¶”ê°€ | ê³µìš© | ë¶€ì„œì¶”ê°€", screens: [...BASE_ADD, ...DEPT_ADD_TAIL_C] },
            "ë²•_ì‹ _ì¶”ê°€_ê°œë³„_ë¶€ì„œë‚´": { code: "SC-01-E", label: "ë²•ì‚¬ì_ì‹ ìš© | ì¶”ê°€ | ê°œë³„ | ë¶€ì„œë‚´ì¶”ê°€", screens: [...BASE_ADD, ...INDIV_ADD_EXTRA, ...DEPT_IN_TAIL_C] },
            "ë²•_ì‹ _ì¶”ê°€_ê°œë³„_ë¶€ì„œì¶”": { code: "SC-01-F", label: "ë²•ì‚¬ì_ì‹ ìš© | ì¶”ê°€ | ê°œë³„ | ë¶€ì„œì¶”ê°€", screens: [...BASE_ADD, ...INDIV_ADD_EXTRA, ...DEPT_ADD_TAIL_C] },
            // ë²•ì‚¬ì_ì²´í¬ (6)
            "ë²•_ì²´_ì‹ ê·œ_ê³µìš©": { code: "SC-03-A", label: "ë²•ì‚¬ì_ì²´í¬ | ì‹ ê·œ | ê³µìš©", screens: [...BASE_NEW, "0009_1", ...TAIL_CHECK] },
            "ë²•_ì²´_ì‹ ê·œ_ê°œë³„": { code: "SC-03-B", label: "ë²•ì‚¬ì_ì²´í¬ | ì‹ ê·œ | ê°œë³„", screens: [...BASE_NEW, ...INDIV_NEW.map(s => s === "0039" ? "0039_1" : s), ...TAIL_CHECK] },
            "ë²•_ì²´_ì¶”ê°€_ê³µìš©_ë¶€ì„œë‚´": { code: "SC-03-C", label: "ë²•ì‚¬ì_ì²´í¬ | ì¶”ê°€ | ê³µìš© | ë¶€ì„œë‚´ì¶”ê°€", screens: [...BASE_ADD, ...DEPT_IN_TAIL_CHK] },
            "ë²•_ì²´_ì¶”ê°€_ê³µìš©_ë¶€ì„œì¶”": { code: "SC-03-D", label: "ë²•ì‚¬ì_ì²´í¬ | ì¶”ê°€ | ê³µìš© | ë¶€ì„œì¶”ê°€", screens: [...BASE_ADD, ...DEPT_ADD_TAIL_CHK] },
            "ë²•_ì²´_ì¶”ê°€_ê°œë³„_ë¶€ì„œë‚´": { code: "SC-03-E", label: "ë²•ì‚¬ì_ì²´í¬ | ì¶”ê°€ | ê°œë³„ | ë¶€ì„œë‚´ì¶”ê°€", screens: [...BASE_ADD, ...INDIV_ADD_EXTRA, ...DEPT_IN_TAIL_CHK] },
            "ë²•_ì²´_ì¶”ê°€_ê°œë³„_ë¶€ì„œì¶”": { code: "SC-03-F", label: "ë²•ì‚¬ì_ì²´í¬ | ì¶”ê°€ | ê°œë³„ | ë¶€ì„œì¶”ê°€", screens: [...BASE_ADD, ...INDIV_ADD_EXTRA, ...DEPT_ADD_TAIL_CHK] },
            // ê°œì‚¬ì_ì‹ ìš© (2)
            "ê°œ_ì‹ _ì‹ ê·œ": { code: "SC-02-A", label: "ê°œì‚¬ì_ì‹ ìš© | ì‹ ê·œ", screens: ["0001", "0002", "0053", "0054", "0055", "0057", "0058", "0059", "0060", "0061", "0062", "0063", "0064", "0065"] },
            "ê°œ_ì‹ _ì¶”ê°€": { code: "SC-02-B", label: "ê°œì‚¬ì_ì‹ ìš© | ì¶”ê°€", screens: ["0001", "0003", "0053", "0054", "0055", "0057", "0058", "0059", "0060", "0061", "0062", "0063", "0064", "0065"] },
            // ê°œì‚¬ì_ì²´í¬ (2)
            "ê°œ_ì²´_ì‹ ê·œ_ê²€ì¦ì™„ë£Œ": { code: "SC-04-A", label: "ê°œì‚¬ì_ì²´í¬ | ì‹ ê·œ | ê²€ì¦ì™„ë£Œ", screens: ["0001", "0066", "0067", "0068", "0069", "0058", "0070", "0071", "0072", "0073", "0074"] },
            "ê°œ_ì²´_ì‹ ê·œ_ê²€ì¦í•„ìš”": { code: "SC-04-B", label: "ê°œì‚¬ì_ì²´í¬ | ì‹ ê·œ | ê²€ì¦í•„ìš”", screens: ["0001", "0066", "0067", "0068", "0069", "0058", "0070", "0071", "0072", "0073", "0074"] },
        };

        // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        // ì‹œë‚˜ë¦¬ì˜¤ í‚¤ ì°¾ê¸°
        // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        function getScenarioKey() {
            const { card, biz, issuance, cardType, dept } = sel;
            if (!card || !biz) return null;
            if (biz === "ê°œì‚¬ì") {
                if (card === "ì‹ ìš©") {
                    if (!issuance) return null;
                    return issuance === "ì‹ ê·œ" ? "ê°œ_ì‹ _ì‹ ê·œ" : "ê°œ_ì‹ _ì¶”ê°€";
                } else {
                    // ì²´í¬: ì‹ ê·œë§Œ, ê²€ì¦ì™„ë£Œ/ê²€ì¦í•„ìš”ëŠ” step5ë¡œ
                    if (!dept) return null;
                    return dept === "ë¶€ì„œë‚´ì¶”ê°€" ? "ê°œ_ì²´_ì‹ ê·œ_ê²€ì¦ì™„ë£Œ" : "ê°œ_ì²´_ì‹ ê·œ_ê²€ì¦í•„ìš”";
                }
            }
            // ë²•ì‚¬ì
            const c = card === "ì‹ ìš©" ? "ì‹ " : "ì²´";
            if (!issuance) return null;
            if (issuance === "ì‹ ê·œ") {
                if (!cardType) return null;
                return `ë²•_${c}_ì‹ ê·œ_${cardType === "ê³µìš©" ? "ê³µìš©" : "ê°œë³„"}`;
            } else {
                if (!cardType) return null;
                if (!dept) return null;
                const d = dept === "ë¶€ì„œë‚´ì¶”ê°€" ? "ë¶€ì„œë‚´" : "ë¶€ì„œì¶”";
                return `ë²•_${c}_ì¶”ê°€_${cardType === "ê³µìš©" ? "ê³µìš©" : "ê°œë³„"}_${d}`;
            }
        }

        // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        // UI ê°±ì‹ 
        // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        function enableStep(n, enable) {
            const el = document.getElementById(`step${n}`);
            el.classList.toggle("step-disabled", !enable);
            el.querySelectorAll(".opt").forEach(b => b.classList.toggle("disabled", !enable));
            document.getElementById(`sn${n}`).className = "step-num" + (enable ? "" : " disabled-n");
        }
        function markDone(n) { document.getElementById(`sn${n}`).className = "step-num done"; }

        function updateStep3() {
            const note = document.getElementById("step3-note");
            const addBtn = document.querySelector("[data-step='3'][data-val='ì¶”ê°€']");
            if (sel.biz === "ê°œì‚¬ì" && sel.card === "ì²´í¬") {
                // ê°œì‚¬ì_ì²´í¬: ì‹ ê·œë§Œ
                if (addBtn) { addBtn.classList.add("disabled"); addBtn.style.opacity = ".35"; }
                note.style.display = "block";
                note.textContent = "â€» ê°œì‚¬ì_ì²´í¬ëŠ” í˜„ì¬ ì‹ ê·œ ë°œê¸‰ ì‹œë‚˜ë¦¬ì˜¤ë§Œ í™•ë³´ë˜ì–´ ìˆìŠµë‹ˆë‹¤.";
            } else {
                if (addBtn) { addBtn.classList.remove("disabled"); addBtn.style.opacity = ""; }
                note.style.display = "none";
            }
        }

        function updateStep4Step5() {
            const { biz, card, issuance } = sel;
            // step4: ë²•ì‚¬ìë§Œ
            const need4 = biz === "ë²•ì‚¬ì";
            enableStep(4, need4);
            if (!need4) { sel.cardType = null; sel.dept = null; }
            // step5: ë²•ì‚¬ì + ì¶”ê°€
            const need5 = biz === "ë²•ì‚¬ì" && issuance === "ì¶”ê°€";
            enableStep(5, need5);
            if (!need5) sel.dept = null;

            // ê°œì‚¬ì_ì²´í¬ì—ì„œ step5ë¥¼ 'ê²€ì¦ì™„ë£Œ/ê²€ì¦í•„ìš”'ë¡œ ì¬ë¼ë²¨ë§
            const s5title = document.querySelector("#step5 .card-title");
            const s5opts = document.querySelectorAll("[data-step='5']");
            if (biz === "ê°œì‚¬ì" && card === "ì²´í¬") {
                enableStep(5, true);
                s5title.innerHTML = "ê²€ì¦ ìƒíƒœë¥¼ ì„ íƒí•˜ì„¸ìš” <span style=\"font-size:12px;color:var(--muted);font-weight:700;\">(ê°œì‚¬ì_ì²´í¬ ì „ìš©)</span>";
                if (s5opts[0]) { s5opts[0].childNodes[0].textContent = "âœ… ê²€ì¦ì™„ë£Œ "; s5opts[0].dataset.val = "ë¶€ì„œë‚´ì¶”ê°€"; }
                if (s5opts[1]) { s5opts[1].childNodes[0].textContent = "ğŸ” ê²€ì¦í•„ìš” "; s5opts[1].dataset.val = "ë¶€ì„œì¶”ê°€"; }
            } else {
                s5title.innerHTML = "ë¶€ì„œ ë°œê¸‰ ë°©ì‹ì„ ì„ íƒí•˜ì„¸ìš” <span style=\"font-size:12px;color:var(--muted);font-weight:700;\">(ì¶”ê°€ë°œê¸‰/ê³µìš©ì¹´ë“œ ì „ìš©)</span>";
                if (s5opts[0]) { s5opts[0].childNodes[0].textContent = "ğŸ“‚ ë¶€ì„œë‚´ ì¶”ê°€ë°œê¸‰ "; s5opts[0].dataset.val = "ë¶€ì„œë‚´ì¶”ê°€"; }
                if (s5opts[1]) { s5opts[1].childNodes[0].textContent = "ğŸ†• ë¶€ì„œì¶”ê°€ "; s5opts[1].dataset.val = "ë¶€ì„œì¶”ê°€"; }
            }
        }

        // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        // ê²°ê³¼ ë Œë”
        // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        function renderResult() {
            const key = getScenarioKey();
            const sc = key ? SCENARIOS[key] : null;
            document.getElementById("result-empty").style.display = sc ? "none" : "block";
            document.getElementById("result-panel").style.display = sc ? "block" : "none";
            if (!sc) return;

            document.getElementById("rp-scenario").textContent = sc.label;
            document.getElementById("rp-code").textContent = sc.code;

            const naCount = sc.screens.filter(s => s.startsWith("N/A")).length;
            document.getElementById("rp-count").textContent =
                `ì´ ${sc.screens.length}ê°œ í™”ë©´${naCount ? ` (ë¯¸êµ¬í˜„ ${naCount}ê°œ í¬í•¨)` : ""}`;

            const grid = document.getElementById("screens-grid");
            grid.innerHTML = sc.screens.map((id, i) => {
                const isNA = id.startsWith("N/A");
                const nm = NAMES[id] || id;
                const file = screenFile(id);
                const href = file ? file : "#";

                // ë§ˆì§€ë§‰ ì•„ì´í…œì€ í™”ì‚´í‘œ ì œì™¸
                const arrow = i < sc.screens.length - 1
                    ? `<div class="flow-arrow"><i class="fa-solid fa-caret-right"></i></div>`
                    : '';

                return `
                <div class="flow-unit">
                    <a class="scr${isNA ? " na" : ""}" href="${href}"${isNA ? "" : " target='_blank'"}>
                        <div class="scr-seq">
                            <span>STEP ${i + 1}</span>
                            <span class="scr-id">${isNA ? "N/A" : id}</span>
                        </div>
                        <span class="scr-name">${nm}${isNA ? `<span class="na-tag">ë¯¸êµ¬í˜„</span>` : ""}</span>
                    </a>
                    ${arrow}
                </div>`;
            }).join("");

            const notes = [];

            // ì‹ ê·œ/ì¶”ê°€ íë¦„ë³„ ì•ˆë‚´
            if (sel.issuance === 'ì‹ ê·œ') {
                notes.push('ğŸ†• <strong>ì‹ ê·œ</strong>: í•´ë‹¹ ê¸°ì—…ì—ì„œ KB ê¸°ì—…ì¹´ë“œë¥¼ ì²˜ìŒ ì‹ ì²­í•˜ëŠ” íë¦„ì…ë‹ˆë‹¤. ì‚¬ì—…ìë²ˆí˜¸ í™•ì¸ â†’ ìƒí’ˆì•ˆë‚´ â†’ ì¤€ë¹„ì„œë¥˜ â†’ ì •ë³´ì…ë ¥ â†’ ì‹ ì²­ì™„ë£Œ ìˆœìœ¼ë¡œ ì§„í–‰ë©ë‹ˆë‹¤.');
            } else if (sel.issuance === 'ì¶”ê°€') {
                notes.push('â• <strong>ì¶”ê°€</strong>: ì´ë¯¸ ì¹´ë“œê°€ ë°œê¸‰ëœ ê¸°ì—…ì—ì„œ ì¹´ë“œë¥¼ ì¶”ê°€ë¡œ ë°œê¸‰í•˜ëŠ” íë¦„ì…ë‹ˆë‹¤. ê¸°ì¡´ ê³„ì•½ ì •ë³´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ê°„ì†Œí™”ëœ ì ˆì°¨ë¡œ ì§„í–‰ë©ë‹ˆë‹¤.');
            }

            // ë¶€ì„œ ë°©ì‹ë³„ ì•ˆë‚´ (ë²•ì‚¬ì ì¶”ê°€ ê³µìš©)
            if (sel.biz === 'ë²•ì‚¬ì' && sel.issuance === 'ì¶”ê°€' && sel.cardType === 'ê³µìš©') {
                if (sel.dept === 'ë¶€ì„œë‚´ì¶”ê°€') {
                    notes.push('ğŸ“‚ <strong>ë¶€ì„œë‚´ì¶”ê°€</strong>: ê¸°ì¡´ì— ë“±ë¡ëœ ë¶€ì„œì— ì¹´ë“œë¥¼ ì¶”ê°€ ë°œê¸‰í•©ë‹ˆë‹¤. ë¶€ì„œ ì‹ ê·œ ìƒì„± ì—†ì´ ì§„í–‰ë©ë‹ˆë‹¤.');
                } else if (sel.dept === 'ë¶€ì„œì¶”ê°€') {
                    notes.push('ğŸ†• <strong>ë¶€ì„œì¶”ê°€</strong>: ì‹ ê·œ ë¶€ì„œë¥¼ ìƒì„±í•˜ë©° ì¹´ë“œë¥¼ ë°œê¸‰í•©ë‹ˆë‹¤. ì—…ì²´(ë¶€ì„œ)ì •ë³´ì™€ í•œë„ë¥¼ ìƒˆë¡œ ì„¤ì •í•©ë‹ˆë‹¤.');
                }
            }

            // ê°œì‚¬ì ì²´í¬ ì œí•œ ì•ˆë‚´
            if (sel.biz === 'ê°œì‚¬ì' && sel.card === 'ì²´í¬') {
                notes.push('ğŸ” <strong>ê°œì¸ì‚¬ì—…ì ì²´í¬ì¹´ë“œ</strong>: ì‹ ë¶„ì¦ ì§„ìœ„í™•ì¸ â†’ ë³¸ì¸í™•ì¸ â†’ ì •ë³´ì…ë ¥ íë¦„ìœ¼ë¡œ ì§„í–‰ë©ë‹ˆë‹¤. ì¶”ê°€ ë°œê¸‰ ì‹œë‚˜ë¦¬ì˜¤ëŠ” í˜„ì¬ ë¯¸í™•ë³´ ìƒíƒœì…ë‹ˆë‹¤.');
            }

            // NA í™”ë©´ ê²½ê³ 
            if (naCount) notes.push(`âš ï¸ N/A í‘œì‹œëœ ${naCount}ê°œ í™”ë©´ì€ ì•„ì§ HTML íŒŒì¼ì´ ì œì‘ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.`);
            if (sc.code.startsWith('SC-03')) notes.push('â€» ì²´í¬ì¹´ë“œ ì „ìš© ì•½ê´€/ë™ì˜ í™”ë©´(N/A)ì€ ì‹ ìš©ì¹´ë“œ ë²„ì „ê³¼ ë³„ë„ ì œì‘ì´ í•„ìš”í•©ë‹ˆë‹¤.');

            document.getElementById('rp-note').innerHTML = notes.length
                ? notes.map(n => `<div style="margin-bottom:6px">${n}</div>`).join('')
                : 'âœ… ëª¨ë“  í™”ë©´ì´ êµ¬í˜„ë˜ì–´ ìˆìŠµë‹ˆë‹¤. í™”ë©´ì„ í´ë¦­í•˜ë©´ í•´ë‹¹ ëª©ì—… íŒŒì¼ì´ ì—´ë¦½ë‹ˆë‹¤.';
        }

        // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        // ë¸Œë ˆë“œí¬ëŸ¼
        // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        function renderBreadcrumb() {
            const parts = [];
            if (sel.card) parts.push(sel.card === "ì‹ ìš©" ? "ğŸ’³ ì‹ ìš©" : "ğŸ¦ ì²´í¬");
            if (sel.biz) parts.push(sel.biz === "ë²•ì‚¬ì" ? "ğŸ¢ ë²•ì¸ì‚¬ì—…ì" : "ğŸ‘¤ ê°œì¸ì‚¬ì—…ì");
            if (sel.issuance) parts.push(sel.issuance === "ì‹ ê·œ" ? "ğŸ†• ì‹ ê·œ" : "â• ì¶”ê°€");
            if (sel.cardType) parts.push(sel.cardType === "ê³µìš©" ? "ğŸ¢ ê³µìš©" : "ğŸ‘¤ ê°œë³„");
            if (sel.dept) {
                const lb = sel.biz === "ê°œì‚¬ì" && sel.card === "ì²´í¬"
                    ? (sel.dept === "ë¶€ì„œë‚´ì¶”ê°€" ? "âœ… ê²€ì¦ì™„ë£Œ" : "ğŸ” ê²€ì¦í•„ìš”")
                    : (sel.dept === "ë¶€ì„œë‚´ì¶”ê°€" ? "ğŸ“‚ ë¶€ì„œë‚´ì¶”ê°€" : "ğŸ†• ë¶€ì„œì¶”ê°€");
                parts.push(lb);
            }
            const key = getScenarioKey();
            const code = key && SCENARIOS[key] ? SCENARIOS[key].code : null;
            const bc = document.getElementById("breadcrumb");
            bc.style.display = parts.length ? "block" : "none";
            document.getElementById("bc-inner").innerHTML =
                parts.map((p, i) => `<span class="bc-item">${p}</span>${i < parts.length - 1 ? '<span class="bc-sep">â€º</span>' : ""}`).join("")
                + (code ? `<span class="bc-code">${code}</span>` : "");
        }

        // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        // í´ë¦­ í•¸ë“¤ëŸ¬
        // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        document.querySelectorAll(".opt").forEach(btn => {
            btn.addEventListener("click", () => {
                const step = +btn.dataset.step;
                const val = btn.dataset.val;

                // ê°™ì€ stepì˜ ë²„íŠ¼ ì„ íƒ í•´ì œ
                document.querySelectorAll(`[data-step="${step}"]`).forEach(b => b.classList.remove("selected"));
                btn.classList.add("selected");
                markDone(step);

                if (step === 1) {
                    sel.card = val; sel.biz = null; sel.issuance = null; sel.cardType = null; sel.dept = null;
                    enableStep(2, true);
                    // í•˜ìœ„ ì„ íƒ ë¦¬ì…‹
                    [3, 4, 5].forEach(s => {
                        enableStep(s, false);
                        document.querySelectorAll(`[data-step="${s}"]`).forEach(b => b.classList.remove("selected"));
                        document.getElementById(`sn${s}`).className = "step-num disabled-n";
                    });
                }
                else if (step === 2) {
                    sel.biz = val; sel.issuance = null; sel.cardType = null; sel.dept = null;
                    enableStep(3, true); updateStep3();
                    [4, 5].forEach(s => {
                        enableStep(s, false);
                        document.querySelectorAll(`[data-step="${s}"]`).forEach(b => b.classList.remove("selected"));
                        document.getElementById(`sn${s}`).className = "step-num disabled-n";
                    });
                }
                else if (step === 3) {
                    sel.issuance = val; sel.cardType = null; sel.dept = null;
                    updateStep4Step5();
                    document.querySelectorAll(`[data-step="4"],[data-step="5"]`).forEach(b => b.classList.remove("selected"));
                    [4, 5].forEach(s => document.getElementById(`sn${s}`).className = "step-num disabled-n");
                    // ê°œì‚¬ì_ì‹ ìš©: ë‹¨ê³„4,5 í•„ìš”ì—†ìŒ â†’ ë°”ë¡œ ê²°ê³¼
                }
                else if (step === 4) {
                    sel.cardType = val; sel.dept = null;
                    updateStep4Step5();
                    document.querySelectorAll(`[data-step="5"]`).forEach(b => b.classList.remove("selected"));
                    document.getElementById("sn5").className = "step-num disabled-n";
                }
                else if (step === 5) { sel.dept = val; }

                renderBreadcrumb();
                renderResult();
            });
        });

        // ì´ˆê¸° ìƒíƒœ
        enableStep(2, false); enableStep(3, false); enableStep(4, false); enableStep(5, false);

        // â”€â”€ ì‹œë‚˜ë¦¬ì˜¤ ì‹œì‘ ë²„íŠ¼ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        document.getElementById('btn-start-scenario').addEventListener('click', () => {
            const key = getScenarioKey();
            const sc = key ? SCENARIOS[key] : null;
            if (!sc) return;
            const sessionId = SessionDB.init(key, sc.code, sc.label);
            const firstScreen = sc.screens.find(s => !s.startsWith('N/A'));
            const firstFile = screenFile(firstScreen);
            if (firstFile) {
                window.location.href = `${firstFile}?session=${sessionId}&scenario=${sc.code}&step=0`;
            } else {
                alert('ì‹œì‘ í™”ë©´ íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: ' + firstScreen);
            }
        });
    </script>
</body>

</html>