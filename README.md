# 기업카드 비대면 신청 목업 (card_mockup)

> 기업카드(신용/체크) × 법인/개인사업자 비대면 신청 프로세스 HTML 목업 모음
>
> **⚠ Entry Point 안내:** 이 목업의 시작점은 **`index.html`**입니다. 모든 통합 흐름 제어 및 초기 테스트 진입은 이 파일을 기준으로 진행해주세요. (`integrated_flow.html`은 내부 동작 참조용입니다.)
> **프로토타입 시연용 전체 개발 가이드**

---

## 📁 프로젝트 구조

```
card_mockup/
├── README.md                        ← 이 파일 (전체 가이드)
├── index.html                       ← 진입점 (모드 선택)
├── general_flow.html                ← 일반 시나리오 시작점
├── integrated_flow.html             ← 통합 시나리오 시작점
├── session-summary.html             ← 세션 완료 요약
├── 0001_r.html ~ 0074_r.html       ← 화면 HTML 목업 (73개)
│
├── css/
│   ├── kb-theme.css                 ← KB 디자인 토큰 + 공통 컴포넌트
│   └── common.css                   ← Toast, Modal, Spec 패턴 (신규)
├── js/
│   ├── scenario-nav.js              ← 시나리오 이동 엔진 + 세션 복구
│   ├── session-db.js                ← localStorage 기반 가상 DB
│   ├── common.js                    ← 공통 유틸 함수
│   └── spec-viewer.js               ← 요건정의서 뷰어
├── mock_db/                         ← 가상 백엔드 JSON 데이터
├── docs/
│   ├── ARCHITECTURE.md        ← 시스템 설계 및 아키텍처 설명서
│   ├── COMPARISON_GUIDE.md    ← 시나리오별 주요 차이점 비교 (신규)
│   ├── scenarios/                   ← 4가지 시나리오 정의
│   ├── branches/                    ← 분기별 세부 흐름
│   └── screens/                     ← 화면별 요건정의 (73개)
└── scripts/                         ← 개발용 유틸 스크립트
    ├── check_screen_ids.py
    ├── extract_specs.py
    └── ... (16개)
```

---

## 🗂️ 4가지 시나리오

| # | 시나리오 | 사용자 유형 | 카드 종류 | 화면 구간 | 파일 |
|---|----------|------------|---------|---------|------|
| 1 | **신용 × 법인사업자** | 법사자 | 신용카드 | 0001~0052 | [→ 상세](docs/scenarios/01_신용_법인사업자.md) |
| 2 | **신용 × 개인사업자** | 개사자 | 신용카드 | 0001, 0053~0065 | [→ 상세](docs/scenarios/02_신용_개인사업자.md) |
| 3 | **체크 × 법인사업자** | 법사자 | 체크카드 | 0001~0052 | [→ 상세](docs/scenarios/03_체크_법인사업자.md) |
| 4 | **체크 × 개인사업자** | 개사자 | 체크카드 | 0001, 0066~0074 | [→ 상세](docs/scenarios/04_체크_개인사업자.md) |

---

## 🔀 분기 계층 구조

AS-IS 24개 시나리오를 **4단계 트리 구조**로 통합한 흐름입니다.

```
[1단계] 신용 / 체크
    │
[2단계] 신규 / 추가
    │
[3단계] 공용 / 개별  (법사자만 해당)
    │
[4단계] 부서내추가 / 부서추가  (법사자 추가발급만 해당)
```

- **[→ BRANCH-01: 신규/추가 분기](docs/branches/BRANCH-01_신규추가_분기.md)**
- **[→ BRANCH-02: 공용/개별 분기](docs/branches/BRANCH-02_공용개별_분기.md)**
- **[→ BRANCH-03: 부서내추가/부서추가 분기](docs/branches/BRANCH-03_부서내추가_부서추가_분기.md)**

---

## 🏠 Landing Page & Scenario Modes

`index.html` 진입 시 두 가지 모드 중 하나를 선택할 수 있습니다.

### 1. Unified Super Scenario (v2)
- **파일**: `integrated_flow.html`
- **특징**: 단일 진입점에서 조건(사업자번호, 상품선택 등)에 따라 화면 흐름이 **동적으로 결정**되는 반응형 플로우입니다.
- **주요 기능**:
  - `MemberLedger` 기반 기존/신규 회원 자동 판별
  - 입력된 조건에 따라 건너뛸 화면 자동 처리 (Skip Logic)
  - **시나리오 자동 복구**: 세션 중단 시 '이어하기/새로시작' 선택 가능
  - 모든 분기 처리를 하나의 통합된 로직으로 수행

### 2. General Scenarios (Legacy)
- **파일**: `general_flow.html`
- **특징**: 16개로 정의된 고정된 시나리오를 리스트에서 **직접 선택**하여 진행합니다.
- **용도**: 특정 케이스(예: 법사자_신용_공용)를 지정하여 테스트할 때 유용합니다.

---

## 📋 전체 화면 목록

| 화면ID | 화면명 | 법사자_신용 | 법사자_체크 | 개사자_신용 | 개사자_체크 | 스펙 |
|--------|--------|:-----------:|:-----------:|:-----------:|:-----------:|------|
| [0001](docs/screens/0001_사업자번호입력.md) | 사업자번호 입력 | ✅ | ✅ | ✅ | ✅ | [스펙](docs/screens/0001_사업자번호입력.md) |
| [0002](docs/screens/0002_신규_대상_통합_발급_안내.md) | 신규 대상 통합 발급 안내 | ✅ | ✅ | ✅ | ✅ | |
| [0003](docs/screens/0003_추가_대상_통합_발급_안내.md) | 추가 대상 통합 발급 안내 | ✅ | ✅ | ✅ | - | |
| [0004](docs/screens/0004_준비사항.md) | 준비사항 | ✅ | ✅ | - | - | |
| [0005](docs/screens/0005_제출서류.md) | 제출서류 | ✅ | ✅ | - | - | |
| [0006](docs/screens/0006_서류자동제출서비스.md) | 서류자동제출서비스 | ✅ | ✅ | - | - | |
| [0007](docs/screens/0007_유의사항.md) | 유의사항 | ✅ | ✅ | - | - | |
| [0008](docs/screens/0008_법인_공동인증서_기업용_이용안내.md) | 법인 공동인증서(기업용)이용안내 | ✅ | ✅ | - | - | |
| [0009](docs/screens/0009_신용카드_상품_약관동의.md) | 신용카드 상품 약관동의 | ✅ | - | - | - | |
| [0009_1](0009_1_r.html) | 체크카드 상품 약관동의 | - | ✅ | - | - | |
| [0010](docs/screens/0010_신청인정보.md) | 신청인정보 | ✅ | ✅ | - | - | |
| [0011](docs/screens/0011_신청자_신용정보_조회_이용_동의.md) | 신청자 신용정보 조회 이용 동의 | ✅ | - | - | - | |
| [0011_1](0011_1_r.html) | 신청자 체크정보 조회 이용 동의 | - | ✅ | - | - | |
| [0012](docs/screens/0012_신청인_본인인증.md) | 신청인 본인인증 | ✅ | ✅ | - | - | |
| [0013](docs/screens/0013_신청인_CDD_조건부_검증.md) | 신청인 CDD 조건부 검증 | ✅ | ✅ | - | - | |
| [0014](docs/screens/0014_대표자_정보.md) | 대표자 정보 | ✅ | ✅ | - | - | |
| [0015](docs/screens/0015_사업자_정보.md) | 사업자 정보 | ✅ | ✅ | - | - | |
| [0016](docs/screens/0016_법인_정보.md) | 법인 정보 | ✅ | ✅ | - | - | |
| [0017](docs/screens/0017_EDD정보.md) | EDD정보 | ✅ | ✅ | - | - | |
| [0018](docs/screens/0018_필수확인사항.md) | 필수확인사항 | ✅ | ✅ | - | - | |
| [0019](docs/screens/0019_이용한도.md) | 이용한도 | ✅ | - | - | - | |
| [0020](docs/screens/0020_명세서_받으실_곳.md) | 명세서 받으실 곳 | ✅ | ✅ | - | - | |
| [0021](docs/screens/0021_카드선택.md) | 카드선택 | ✅ | ✅ | - | - | |
| [0022](docs/screens/0022_결제일.md) | 결제일 | ✅ | ✅ | - | - | |
| [0023](docs/screens/0023_결제계좌.md) | 결제계좌 | ✅ | ✅ | - | - | |
| [0024](docs/screens/0024_신청매수.md) | 신청매수 | ✅ | ✅ | - | - | |
| [0025](docs/screens/0025_발급_확인_및_약관수령.md) | 발급 확인 및 약관수령 | ✅ | ✅ | - | - | |
| [0026](docs/screens/0026_카드수령지.md) | 카드수령지 | ✅ | ✅ | - | - | |
| [0027](docs/screens/0027_추천인.md) | 추천인 | ✅ | ✅ | - | - | |
| [0028](docs/screens/0028_공동인증서_인증.md) | 공동인증서 인증 | ✅ | ✅ | - | - | |
| [0029](docs/screens/0029_카드정보_확인용_.md) | 카드정보(확인용) | ✅ | ✅ | - | - | |
| [0030](docs/screens/0030_사업자정보_확인용_.md) | 사업자정보(확인용) | ✅ | ✅ | - | - | |
| [0031](docs/screens/0031_대표자정보_확인용_.md) | 대표자정보(확인용) | ✅ | ✅ | - | - | |
| [0032](docs/screens/0032_법인인증.md) | 법인인증 | ✅ | ✅ | - | - | |
| [0033](docs/screens/0033_추가서류제출.md) | 추가서류제출 | ✅ | ✅ | - | - | |
| [0034](docs/screens/0034_신청완료.md) | 신청완료 | ✅ | ✅ | - | - | |
| [0035](docs/screens/0035_개별_카드_회원_동의서_작성안내.md) | 개별 카드 회원 동의서 작성안내 | ✅(개별) | ✅(개별) | - | - | |
| [0036](docs/screens/0036_개별카드_사용자_개인명의계좌_등록.md) | 개별카드 사용자 개인명의계좌 등록 | ✅(개별) | ✅(개별) | - | - | |
| [0037](docs/screens/0037_개별카드_발급_대상_고객_정보.md) | 개별카드 발급 대상 고객 정보 | ✅(개별) | ✅(개별) | - | - | |
| [0038](docs/screens/0038_개별카드_동의_조회_조회하기_.md) | 개별카드 동의 조회(조회하기) | ✅(개별) | ✅(개별) | - | - | |
| [0039](docs/screens/0039_개인신용정보_동의서.md) | 개인신용정보 동의서 | ✅(개별) | - | - | - | |
| [0039_1](0039_1_r.html) | 개인체크정보 동의서 | - | ✅(개별) | - | - | |
| [0040](docs/screens/0040_개별카드_동의_조회_신청하기_.md) | 개별카드 동의 조회(신청하기) | ✅(개별) | ✅(개별) | - | - | |
| [0041](docs/screens/0041_개별카드.md) | 개별카드 | ✅(개별) | ✅(개별) | - | - | |
| [0042](docs/screens/0042_법인_EDD정보.md) | 법인 EDD정보 | ✅(추가) | ✅(추가) | - | - | |
| [0043](docs/screens/0043_발급_대상_부서_팝업.md) | 발급 대상 부서 팝업 | ✅(추가) | ✅(추가) | - | - | |
| [0044](docs/screens/0044_개별카드_동의_조회_신청하기__추가전용.md) | 개별카드 동의 조회_추가전용 | ✅(추가개별) | ✅(추가개별) | - | - | |
| [0045](docs/screens/0045_기본정보.md) | 기본정보 | ✅(추가공용) | ✅(추가공용) | - | - | |
| [0046](docs/screens/0046_유의_및_준비사항.md) | 유의 및 준비사항 | ✅(추가개별) | ✅(추가개별) | - | - | |
| [0047](docs/screens/0047_대표자_사업자정보.md) | 대표자_사업자정보 | ✅(부서추가) | ✅(부서추가) | - | - | |
| [0048](docs/screens/0048_업체_부서_정보.md) | 업체(부서)정보 | ✅(부서추가) | ✅(부서추가) | - | - | |
| [0049](docs/screens/0049_기본정보2.md) | 기본정보2 | ✅ | ✅ | - | - | |
| [0050](docs/screens/0050_부서별한도_요청한도_입력_.md) | 부서별한도(요청한도 입력) | ✅(부서추가) | ✅(부서추가) | - | - | |
| [0051](docs/screens/0051_업체_부서_정보_확인용_.md) | 업체(부서)정보(확인용) | ✅(추가) | ✅(추가) | - | - | |
| [0052](docs/screens/0052_신청완료_카드신청정보_확인용_.md) | 신청완료_카드신청정보(확인용) | ✅(추가) | ✅(추가) | - | - | |
| **0056** | *(해당 없음)* | - | - | - | - | 의도적 결번 |
| [0053](docs/screens/0053_유의_및_준비사항_개사자_신용_.md) | 유의 및 준비사항(개사자_신용) | - | - | ✅ | - | |
| [0054](docs/screens/0054_추가정보선택_개사자전용_.md) | 추가정보선택(개사자전용) | - | - | ✅ | - | |
| [0055](docs/screens/0055_약관동의_신용_or_체크_.md) | 약관동의(신용 or 체크) | - | - | ✅ | - | |
| [0057](docs/screens/0057_카드신청_기본_CDD_개사자전용_.md) | 카드신청 기본_CDD(개사자전용) | - | - | ✅ | - | |
| [0058](docs/screens/0058_3종_본인인증_개사자_신용_체크_.md) | 3종 본인인증(개사자_신용_체크) | - | - | ✅ | ✅ | |
| [0059](docs/screens/0059_설립년월일_업종분류_개사자전용_.md) | 설립년월일_업종분류(개사자전용) | - | - | ✅ | - | |
| [0060](docs/screens/0060_한도부여결과조회_개사자전용_.md) | 한도부여결과조회(개사자전용) | - | - | ✅ | - | |
| [0061](docs/screens/0061_신분증_정보_개사자전용_.md) | 신분증 정보(개사자전용) | - | - | ✅ | - | |
| [0062](docs/screens/0062_필수확인사항_개사자전용_.md) | 필수확인사항(개사자전용) | - | - | ✅ | - | |
| [0063](docs/screens/0063_카드정보_개사자전용_.md) | 카드정보(개사자전용) | - | - | ✅ | - | |
| [0064](docs/screens/0064_카드정보수정하기_개사자전용_.md) | 카드정보수정하기(개사자전용) | - | - | ✅ | - | |
| [0065](docs/screens/0065_카드신청완료_개사자전용_.md) | 카드신청완료(개사자전용) | - | - | ✅ | - | |
| [0066](docs/screens/0066_유의_및_준비사항_개사_체크전용_.md) | 유의 및 준비사항(개사_체크전용) | - | - | - | ✅ | |
| [0067](docs/screens/0067_신분증진위확인_촬영또는직접입력선택.md) | 신분증진위확인 방법 선택 | - | - | - | ✅ | |
| [0068](docs/screens/0068_신분증정보_입력_개사_체크_.md) | 신분증정보 입력(개사 체크) | - | - | - | ✅ | |
| [0069](docs/screens/0069_본인확인_개사_체크_.md) | 본인확인(개사_체크) | - | - | - | ✅ | |
| [0070](docs/screens/0070_신청정보_CDD_개사_체크_.md) | 신청정보_CDD(개사_체크) | - | - | - | ✅ | |
| [0071](docs/screens/0071_신청정보_설립년월_개사_체크_.md) | 신청정보_설립년월(개사_체크) | - | - | - | ✅ | |
| [0072](docs/screens/0072_약관동의_개사자_체크_.md) | 약관동의(개사자_체크) | - | - | - | ✅ | |
| [0073](docs/screens/0073_신청정보_수정하기_개사자_체크_.md) | 신청정보_수정하기(개사자_체크) | - | - | - | ✅ | |
| [0074](docs/screens/0074_접수완료_개사자_체크_.md) | 접수완료(개사자_체크) | - | - | - | ✅ | |

---

## ⚠️ 화면 ID 검증 결과

> 검증 스크립트: `check_screen_ids.py` / 결과 파일: `screen_id_check.txt`

### ❌ 불일치
- **[완료]** `0038_r.html` 내부 SCREEN_ID 수정 완료.

### ⚠️ SCREEN_ID 미정의
- **[진행중]** 18개 파일에 상수 정의 추가 작업 예정.

---

## 🏗️ 개발 가이드

### 상태 관리 (금융권 권장 방식)

금융 서비스는 **서버 측 세션 관리**가 표준입니다. 아래 3가지 방식 중 이 프로젝트(프로토타입)에서는 **2번**을 권장합니다.

| 방식 | 설명 | 보안 | 적합성 |
|------|------|------|--------|
| **① 서버 세션 + HttpOnly 쿠키** | 가장 안전. 실제 금융시스템 표준 | ⭐⭐⭐ | 운영계 |
| **② sessionStorage (임시)** | 탭 단위 유지, JS 접근 가능 | ⭐⭐ | **프로토타입** |
| **③ URL 파라미터** | 단순 분기 전달용 | ⭐ | 분기값만 |

> **이 프로젝트의 현재 방식:** `ScenarioNav` API와 `SessionDB`를 연동한 **세션 기반 이동 및 로깅**.  
> `localStorage`에 세션 데이터가 실시간으로 누적되며, 중단 시 복구 기능을 지원합니다.

### Mock 백엔드 설계 (3개 원장 DB 및 폼 데이터 구조)

> **업무 요건 변경(2023-10):** 화면의 임의 세팅값을 모두 비우며, 실제 사용자의 입력을 받아 데이터베이스화하도록 기준이 변경되었습니다. 아래 스키마는 각 영문 컬럼에 대한 화면 내 한글 항목(주석) 매핑을 포함합니다.

```
Mock API 구조 (JSON 파일 또는 인메모리 객체)
│
├── 신청서접수원장DB (Application DB)
│   ├── application_id       // 신청 ID
│   ├── product_type         // 상품 종류 (신용/체크)
│   ├── applicant_type       // 신청자 유형 (법사자/개사자)
│   ├── status               // 진행 상태 (접수중/완료/반려)
│   ├── company_name         // 직장(사업장)명 [화면: 업체(부서)정보]
│   ├── biz_address          // 사업장 주소 [화면: 업체(부서)정보]
│   ├── biz_phone            // 사업장 전화번호 [화면: 업체(부서)정보]
│   ├── est_date             // 설립년월일 [화면: 설립년월일_업종분류]
│   ├── biz_category         // 업종분류 [화면: 설립년월일_업종분류]
│   ├── req_limit            // 요청한도 [화면: 부서별한도]
│   └── screens_data[]       // 각 화면별 전체 입력값 누적 JSON
│
├── 회원원장DB (Member DB)
│   ├── biz_no               // 사업자번호 (Key) [화면: 사업자번호 입력]
│   ├── corp_no              // 법인등록번호 [화면: 법인 정보]
│   ├── existing_cards[]     // 기존 소유 카드 목록
│   ├── payment_account      // 결제계좌 [화면: 결제계좌]
│   ├── billing_address      // 명세서 수령지 [화면: 명세서 받으실 곳]
│   └── is_new_or_additional // 신규/추가 여부 파라미터
│
└── 고객원장DB (Customer DB)
    ├── rrn                  // 주민번호 (Key) [화면: 신청인 본인인증]
    ├── name                 // 성명 (한글) [화면: 신청인 본인인증]
    ├── eng_name             // 영문 성명 [화면: 대표자 정보]
    ├── id_card_issue_date   // 신분증 발급일자 [화면: 신분증 정보]
    ├── home_address         // 자택 주소 [화면: 신청인 정보]
    ├── mobile_no            // 휴대폰 번호 [화면: 신청인 본인인증]
    ├── cdd_status           // CDD 갱신 필요 여부 (고객확인제도)
    └── credit_limit         // 심사부여한도 (시스템 계산)
```

### SPA vs 파일링크 방식 비교

| 항목 | SPA (index.html 1개) | 파일링크 방식 (현재) |
|------|---------------------|---------------------|
| 화면 전환 | 빠름 (JS 라우팅) | 페이지 새로고침 |
| 상태 유지 | 메모리에 유지 용이 | sessionStorage 필요 |
| 개발 복잡도 | 높음 (React/Vue 필요) | 낮음 (HTML 독립) |
| 금융권 레퍼런스 | 토스, 카카오페이 등 최신 핀테크 | 전통 은행 웹 |
| **이 프로토타입 권장** | ⭐ 추후 고도화 시 | ✅ **현재 유지 권장** |

> **결론:** 프로토타입 시연 목적이므로 **현재 파일링크 방식을 유지**하고, 추후 SPA 전환 검토.

### 공통 컴포넌트 설명

> "공통 컴포넌트"란 여러 화면에서 **반복해서 사용되는 UI 코드 조각**을 말합니다.  
> 현재는 각 HTML 파일마다 동일한 코드가 복사되어 있어 수정 시 모든 파일을 수정해야 합니다.

| 컴포넌트 | 현재 | 개선 제안 |
|---------|------|---------|
| `toast` (알림 메시지) | 모든 HTML에 중복 | `common.js`로 분리 |
| `spec-modal` (요건 모달) | 모든 HTML에 중복 | `common.js`로 분리 |
| CSS 변수 (`--kb-yellow` 등) | 모든 HTML에 중복 | `common.css`로 분리 |

---

## 🔧 스크립트 사용법

```bash
# 화면 ID 검증
python check_screen_ids.py
cat screen_id_check.txt

# 화면별 요건정의 재추출
python extract_specs.py
```

---

## 📌 주요 이슈 및 TODO

- [x] `0038_r.html` 내부 SCREEN_ID `0039` → `0038`로 수정
- [x] SCREEN_ID 미정의 파일(33개) 상수 정의 추가 완료
- [x] 체크카드 전용 약관/동의 화면 HTML 신규 제작 (0009_1, 0011_1, 0039_1) 완료
- [x] Mock 백엔드 3개 원장 DB JSON 파일 작성 완료 (`mock_db/`)
- [x] 0056번 화면: 의도적 결번 (정상)
- [x] `ScenarioNav` API 도입 — 100개 화면 전면 교체 완료
- [x] 세션 복구(이어가기/새로시작) 기능 구현 완료
- [x] `css/common.css` 생성 + 전 화면 적용 완료
- [x] 개발 스크립트 16개 → `scripts/` 폴더로 정리 완료
- [x] 전 화면(74개) 요구사항 정의서(REQ_SPEC) JSON 자동 추출 (`docs/specs/`) 및 `?` 모달 뷰어(`spec-viewer.js`) 연동 완료
- [x] 0001 화면 1234567890 입력 시 0002 -> 0004 신규발급 분기 및 네비게이션 디버깅 완료
- [ ] HTML 파일 확장자 대/소문자 통일  (`.HTML` → `.html`)
