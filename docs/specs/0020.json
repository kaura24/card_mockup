{
  "screen_id": "0020",
  "screen_name": "명세서 받으실 곳",
  "applies_to": {
    "corp": "Y",
    "personal": "N"
  },
  "action": "정보입력",
  "input_value_shape": [
    {
      "key": "stmt_method",
      "label": "명세서 받는방법",
      "required": true,
      "type": "radio",
      "values": [
        "email",
        "app"
      ]
    },
    {
      "key": "receive_post",
      "label": "우편 명세서 수령(사업장 주소지)",
      "required": false,
      "type": "checkbox"
    },
    {
      "key": "email",
      "label": "이메일(아이디@도메인)",
      "required": "조건부",
      "type": "text+select",
      "rule": [
        "수령방법이 이메일인 경우 필수",
        "특정 상품코드인 경우(정책) 필수",
        "도메인 프리셋 선택 가능(직접입력/리스트)"
      ]
    }
  ],
  "backend": {
    "system": "N(처리계 거래 없음, 표 기준)",
    "purpose": "명세서 수령 채널(이메일/APP/우편) 설정 및 고객 안내",
    "read": "이전 입력값이 있으면 플랫폼 저장/세션에서 복원(가정)",
    "write": "플랫폼 임시저장/세션 저장(가정). 최종 신청 전문 포함/전달 시점은 확정 필요"
  },
  "entry_condition": [
    "이전 단계(0019 이용한도) 완료 후 진입",
    "명세서 수령 채널을 확정해야 다음 단계 진행 가능"
  ],
  "ui_nature": [
    "라디오 선택(이메일/KB국민기업카드(APP)) + 선택적 우편 수령",
    "이메일 입력(아이디/도메인 + 도메인 선택)",
    "ESG 추천 안내 문구 노출"
  ],
  "control_rules": [
    "명세서 받는방법은 필수(*)이며 미선택 시 진행 불가(라디오 그룹)",
    "이메일 선택 시 이메일 필수",
    "특정 상품코드 정책(force_email_by_product=true)인 경우, APP 선택이어도 이메일 필수",
    "우편 수령은 사업장 주소지로 발송(주소 상세/수정은 별도 화면/정책 범위)",
    "이메일 형식 검증: 아이디는 공백/@ 금지, 도메인은 '.' 포함"
  ],
  "error_cases": [
    "필수값(이메일 조건부 포함) 누락: '이메일을 입력해 주세요' 및 진행 차단",
    "이메일 형식 오류: '이메일 형식을 확인해 주세요' 및 진행 차단",
    "정책/코드 미확정(특정 상품코드 등): 운영 정책 확정 후 구현 값 반영 필요"
  ],
  "audit_log_points": [
    "stmt_method(email/app)",
    "receive_post true/false",
    "email 입력값(로그 저장 시 마스킹/최소화 권장)",
    "다음 버튼 클릭 시점"
  ],
  "related_scenarios": [
    "신용_신규_공용(대표 또는 대리인) 흐름 내 0020 포함",
    "신용_신규_개별(대표 또는 대리인) 흐름 내 0020 포함",
    "부서내추가/부서추가 흐름에서도 동일 개념 재사용 가능"
  ],
  "next_screens": {
    "prev": "0019",
    "next": "0021"
  },
  "annotations": [
    {
      "no": 1,
      "selector": "[data-anno='1']",
      "title": "라벨: 명세서 받는방법",
      "desc": "필수(*) 표기"
    },
    {
      "no": 2,
      "selector": "[data-anno='2']",
      "title": "입력: 수령방법 라디오그룹",
      "desc": "이메일/APP 중 선택"
    },
    {
      "no": 3,
      "selector": "[data-anno='3']",
      "title": "옵션: 이메일",
      "desc": "선택 시 이메일 입력 필수"
    },
    {
      "no": 4,
      "selector": "[data-anno='4']",
      "title": "옵션: KB국민기업카드(APP)",
      "desc": "APP로 명세서 확인 가능(정책에 따라 이메일은 선택/필수)"
    },
    {
      "no": 5,
      "selector": "[data-anno='5']",
      "title": "안내: ESG/APP 설명",
      "desc": "ESG 실천을 위해 이메일/APP 추천 문구"
    },
    {
      "no": 6,
      "selector": "[data-anno='6']",
      "title": "옵션: 우편 명세서(사업장 주소지)",
      "desc": "선택적(기본 체크 목업), 주소는 사업장 주소지로 가정"
    },
    {
      "no": 7,
      "selector": "[data-anno='7']",
      "title": "라벨: 이메일",
      "desc": "조건부 필수(이메일 선택 또는 특정 상품코드)"
    },
    {
      "no": 8,
      "selector": "[data-anno='8']",
      "title": "입력: 이메일 아이디/도메인",
      "desc": "아이디@도메인 입력"
    },
    {
      "no": 9,
      "selector": "[data-anno='9']",
      "title": "입력: 도메인 선택",
      "desc": "직접입력/프리셋 선택 시 도메인 필드 disable"
    },
    {
      "no": 10,
      "selector": "[data-anno='10']",
      "title": "안내: 이메일 발송",
      "desc": "현재 접수중인 부서 명세서 발송 안내(조건부 의미 포함)"
    },
    {
      "no": 11,
      "selector": "[data-anno='11']",
      "title": "이전/다음 버튼",
      "desc": "이전: 0019, 다음: 0021(목업)"
    }
  ],
  "requirements": [
    {
      "id": "REQ-0020-001",
      "priority": "Must",
      "desc": "명세서 받는방법(이메일/KB국민기업카드(APP))을 선택할 수 있어야 하며, 미선택 시 다음 단계로 진행할 수 없다.",
      "acceptance": "라디오 미선택 상태에서 '다음' 클릭 시 오류 처리(또는 기본값 강제)되며 진행되지 않는다."
    },
    {
      "id": "REQ-0020-002",
      "priority": "Must",
      "desc": "수령방법이 '이메일'인 경우 이메일 입력(아이디@도메인)은 필수이며, 형식 검증을 수행한다.",
      "acceptance": "아이디/도메인 누락 또는 형식 오류 시 오류 메시지 노출 및 진행 차단."
    },
    {
      "id": "REQ-0020-003",
      "priority": "Must",
      "desc": "특정 상품코드 정책에 따라(force_email_by_product) 수령방법이 APP이어도 이메일 입력이 필수일 수 있다.",
      "acceptance": "정책=true일 때 APP 선택 상태에서도 이메일 미입력 시 진행 차단된다."
    },
    {
      "id": "REQ-0020-004",
      "priority": "Should",
      "desc": "도메인은 직접입력과 프리셋 선택을 제공하며, 프리셋 선택 시 도메인 입력 필드를 자동 세팅 및 비활성화한다.",
      "acceptance": "프리셋 선택 시 도메인이 자동 입력되고, 직접입력 선택 시 다시 활성화된다."
    },
    {
      "id": "REQ-0020-005",
      "priority": "Should",
      "desc": "우편 명세서 수령(사업장 주소지) 옵션을 제공하며, 선택 여부를 저장/복원한다.",
      "acceptance": "옵션 on/off가 저장되고 재진입 시 동일하게 복원된다."
    },
    {
      "id": "REQ-0020-006",
      "priority": "Must",
      "desc": "본 화면은 처리계 거래(N)로 정의되어 있으므로, 저장 위치(플랫폼 DB/세션) 및 최종 전문 포함 시점을 업무흐름으로 확정해야 한다.",
      "acceptance": "요건서/전문설계에 저장 위치와 제출 시점이 명시되고 구현과 일치한다."
    },
    {
      "id": "REQ-0020-007",
      "priority": "Must",
      "desc": "ESG 관련 추천 안내 문구(APP/이메일 추천)는 화면에 노출한다.",
      "acceptance": "해당 안내 문구가 UI에 고정 노출된다(문구 변경 시 요건서 업데이트)."
    },
    {
      "id": "REQ-0020-008",
      "priority": "Must",
      "desc": "이메일 등 개인정보는 감사/로그 저장 시 마스킹 또는 최소화 정책을 적용한다.",
      "acceptance": "로그에 이메일 원문이 남지 않거나 마스킹되어 저장된다."
    },
    {
      "id": "REQ-0020-009",
      "priority": "Must",
      "desc": "모달은 1개의 화면(뷰포트) 안에 보이도록 max-height를 적용하고, 콘텐츠가 늘어나면 모달 내부만 스크롤한다.",
      "acceptance": "페이지(body)는 스크롤되지 않고 모달 content에서만 스크롤이 발생한다."
    }
  ],
  "notes": [
    "화면기능목록(0020) 기준: 이메일/app/우편 선택 개념 + 이메일 조건부 필수(특정 상품코드 포함).",
    "이미지에는 이메일/APP 라디오와 '우편 명세서 사업장 주소지 수령' 표시가 함께 존재하여 복수 채널(또는 옵션) 형태로 구현함.",
    "특정 상품코드 목록/정책값은 업무/상품 정책 확정 후 코드화 필요."
  ]
}